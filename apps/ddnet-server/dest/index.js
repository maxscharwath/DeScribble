"use strict";var po=Object.create;var Zs=Object.defineProperty;var mo=Object.getOwnPropertyDescriptor;var yo=Object.getOwnPropertyNames;var go=Object.getPrototypeOf,xo=Object.prototype.hasOwnProperty;var se=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var bo=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of yo(e))!xo.call(t,s)&&s!==r&&Zs(t,s,{get:()=>e[s],enumerable:!(n=mo(e,s))||n.enumerable});return t};var yt=(t,e,r)=>(r=t!=null?po(go(t)):{},bo(e||!t||!t.__esModule?Zs(r,"default",{value:t,enumerable:!0}):r,t));var Fi=se((Bf,Vi)=>{var Ui=require("fs"),Oe=require("path"),Ii=typeof __webpack_require__=="function"?__non_webpack_require__:require,Zc=process.config&&process.config.variables||{},Gc=!!process.env.PREBUILDS_ONLY,Ti=process.versions.modules,us=Yc()?"electron":"node",ln=process.arch,un=process.platform,Li=process.env.LIBC||(Xc(un)?"musl":"glibc"),fs=process.env.ARM_VERSION||(ln==="arm64"?"8":Zc.arm_version)||"",Ri=(process.versions.uv||"").split(".")[0];Vi.exports=He;function He(t){return Ii(He.path(t))}He.path=function(t){t=Oe.resolve(t||".");var e;try{e=Ii(Oe.join(t,"package.json")).name;var r=e.toUpperCase().replace(/-/g,"_")+"_PREBUILD";process.env[r]&&(t=process.env[r])}catch{}if(!Gc){var n=Oi(Oe.join(t,"build/Release"),Ci);if(n)return n;var s=Oi(Oe.join(t,"build/Debug"),Ci);if(s)return s}var i=f(t);if(i)return i;var a=f(Oe.dirname(process.execPath));if(a)return a;var o=(e[0]=="@"?"":"@"+e+"/")+e+"-"+un+"-"+ln;try{var l=Oe.dirname(require("module").createRequire(Oe.join(t,"package.json")).resolve(o));return d(l)}catch{}var c=["platform="+un,"arch="+ln,"runtime="+us,"abi="+Ti,"uv="+Ri,fs?"armv="+fs:"","libc="+Li,"node="+process.versions.node,process.versions.electron?"electron="+process.versions.electron:"",typeof __webpack_require__=="function"?"webpack=true":""].filter(Boolean).join(" ");throw new Error("No native build was found for "+c+`
    loaded from: `+t+" and package: "+o+`
`);function f(y){var k=ds(Oe.join(y,"prebuilds")).map(Mi),w=k.filter(Bi(un,ln)).sort(Ni)[0];if(w)return d(Oe.join(y,"prebuilds",w.name))}function d(y){var k=ds(y).map(Pi),w=k.filter(ji(us,Ti)),_=w.sort(Di(us))[0];if(_)return Oe.join(y,_.file)}};function ds(t){try{return Ui.readdirSync(t)}catch{return[]}}function Oi(t,e){var r=ds(t).filter(e);return r[0]&&Oe.join(t,r[0])}function Ci(t){return/\.node$/.test(t)}function Mi(t){var e=t.split("-");if(e.length===2){var r=e[0],n=e[1].split("+");if(r&&n.length&&n.every(Boolean))return{name:t,platform:r,architectures:n}}}function Bi(t,e){return function(r){return r==null||r.platform!==t?!1:r.architectures.includes(e)}}function Ni(t,e){return t.architectures.length-e.architectures.length}function Pi(t){var e=t.split("."),r=e.pop(),n={file:t,specificity:0};if(r==="node"){for(var s=0;s<e.length;s++){var i=e[s];if(i==="node"||i==="electron"||i==="node-webkit")n.runtime=i;else if(i==="napi")n.napi=!0;else if(i.slice(0,3)==="abi")n.abi=i.slice(3);else if(i.slice(0,2)==="uv")n.uv=i.slice(2);else if(i.slice(0,4)==="armv")n.armv=i.slice(4);else if(i==="glibc"||i==="musl")n.libc=i;else continue;n.specificity++}return n}}function ji(t,e){return function(r){return!(r==null||r.runtime!==t&&!Kc(r)||r.abi!==e&&!r.napi||r.uv&&r.uv!==Ri||r.armv&&r.armv!==fs||r.libc&&r.libc!==Li)}}function Kc(t){return t.runtime==="node"&&t.napi}function Di(t){return function(e,r){return e.runtime!==r.runtime?e.runtime===t?-1:1:e.abi!==r.abi?e.abi?-1:1:e.specificity!==r.specificity?e.specificity>r.specificity?-1:1:0}}function Yc(){return process.versions&&process.versions.electron||process.env.ELECTRON_RUN_AS_NODE?!0:typeof window<"u"&&window.process&&window.process.type==="renderer"}function Xc(t){return t==="linux"&&Ui.existsSync("/etc/alpine-release")}He.parseTags=Pi;He.matchTags=ji;He.compareTags=Di;He.parseTuple=Mi;He.matchTuple=Bi;He.compareTuples=Ni});var qi=se((Nf,zi)=>{zi.exports=Fi()(__dirname)});var Es=se((Rh,fa)=>{"use strict";var{Duplex:Xl}=require("stream");function la(t){t.emit("close")}function Jl(){!this.destroyed&&this._writableState.finished&&this.destroy()}function ua(t){this.removeListener("error",ua),this.destroy(),this.listenerCount("error")===0&&this.emit("error",t)}function Ql(t,e){let r=!0,n=new Xl({...e,autoDestroy:!1,emitClose:!1,objectMode:!1,writableObjectMode:!1});return t.on("message",function(i,a){let o=!a&&n._readableState.objectMode?i.toString():i;n.push(o)||t.pause()}),t.once("error",function(i){n.destroyed||(r=!1,n.destroy(i))}),t.once("close",function(){n.destroyed||n.push(null)}),n._destroy=function(s,i){if(t.readyState===t.CLOSED){i(s),process.nextTick(la,n);return}let a=!1;t.once("error",function(l){a=!0,i(l)}),t.once("close",function(){a||i(s),process.nextTick(la,n)}),r&&t.terminate()},n._final=function(s){if(t.readyState===t.CONNECTING){t.once("open",function(){n._final(s)});return}t._socket!==null&&(t._socket._writableState.finished?(s(),n._readableState.endEmitted&&n.destroy()):(t._socket.once("finish",function(){s()}),t.close()))},n._read=function(){t.isPaused&&t.resume()},n._write=function(s,i,a){if(t.readyState===t.CONNECTING){t.once("open",function(){n._write(s,i,a)});return}t.send(s,a)},n.on("end",Jl),n.on("error",ua),n}fa.exports=Ql});var dt=se((Mh,da)=>{"use strict";da.exports={BINARY_TYPES:["nodebuffer","arraybuffer","fragments"],EMPTY_BUFFER:Buffer.alloc(0),GUID:"258EAFA5-E914-47DA-95CA-C5AB0DC85B11",kForOnEventAttribute:Symbol("kIsForOnEventAttribute"),kListener:Symbol("kListener"),kStatusCode:Symbol("status-code"),kWebSocket:Symbol("websocket"),NOOP:()=>{}}});var Ar=se((Bh,Tn)=>{"use strict";var{EMPTY_BUFFER:eu}=dt(),As=Buffer[Symbol.species];function tu(t,e){if(t.length===0)return eu;if(t.length===1)return t[0];let r=Buffer.allocUnsafe(e),n=0;for(let s=0;s<t.length;s++){let i=t[s];r.set(i,n),n+=i.length}return n<e?new As(r.buffer,r.byteOffset,n):r}function ha(t,e,r,n,s){for(let i=0;i<s;i++)r[n+i]=t[i]^e[i&3]}function pa(t,e){for(let r=0;r<t.length;r++)t[r]^=e[r&3]}function ru(t){return t.length===t.buffer.byteLength?t.buffer:t.buffer.slice(t.byteOffset,t.byteOffset+t.length)}function Ts(t){if(Ts.readOnly=!0,Buffer.isBuffer(t))return t;let e;return t instanceof ArrayBuffer?e=new As(t):ArrayBuffer.isView(t)?e=new As(t.buffer,t.byteOffset,t.byteLength):(e=Buffer.from(t),Ts.readOnly=!1),e}Tn.exports={concat:tu,mask:ha,toArrayBuffer:ru,toBuffer:Ts,unmask:pa};if(!process.env.WS_NO_BUFFER_UTIL)try{let t=require("bufferutil");Tn.exports.mask=function(e,r,n,s,i){i<48?ha(e,r,n,s,i):t.mask(e,r,n,s,i)},Tn.exports.unmask=function(e,r){e.length<32?pa(e,r):t.unmask(e,r)}}catch{}});var ga=se((Nh,ya)=>{"use strict";var ma=Symbol("kDone"),Os=Symbol("kRun"),Cs=class{constructor(e){this[ma]=()=>{this.pending--,this[Os]()},this.concurrency=e||1/0,this.jobs=[],this.pending=0}add(e){this.jobs.push(e),this[Os]()}[Os](){if(this.pending!==this.concurrency&&this.jobs.length){let e=this.jobs.shift();this.pending++,e(this[ma])}}};ya.exports=Cs});var Cr=se((Ph,va)=>{"use strict";var Tr=require("zlib"),xa=Ar(),nu=ga(),{kStatusCode:ba}=dt(),su=Buffer[Symbol.species],iu=Buffer.from([0,0,255,255]),Un=Symbol("permessage-deflate"),$e=Symbol("total-length"),Or=Symbol("callback"),ht=Symbol("buffers"),Cn=Symbol("error"),On,Us=class{constructor(e,r,n){if(this._maxPayload=n|0,this._options=e||{},this._threshold=this._options.threshold!==void 0?this._options.threshold:1024,this._isServer=!!r,this._deflate=null,this._inflate=null,this.params=null,!On){let s=this._options.concurrencyLimit!==void 0?this._options.concurrencyLimit:10;On=new nu(s)}}static get extensionName(){return"permessage-deflate"}offer(){let e={};return this._options.serverNoContextTakeover&&(e.server_no_context_takeover=!0),this._options.clientNoContextTakeover&&(e.client_no_context_takeover=!0),this._options.serverMaxWindowBits&&(e.server_max_window_bits=this._options.serverMaxWindowBits),this._options.clientMaxWindowBits?e.client_max_window_bits=this._options.clientMaxWindowBits:this._options.clientMaxWindowBits==null&&(e.client_max_window_bits=!0),e}accept(e){return e=this.normalizeParams(e),this.params=this._isServer?this.acceptAsServer(e):this.acceptAsClient(e),this.params}cleanup(){if(this._inflate&&(this._inflate.close(),this._inflate=null),this._deflate){let e=this._deflate[Or];this._deflate.close(),this._deflate=null,e&&e(new Error("The deflate stream was closed while data was being processed"))}}acceptAsServer(e){let r=this._options,n=e.find(s=>!(r.serverNoContextTakeover===!1&&s.server_no_context_takeover||s.server_max_window_bits&&(r.serverMaxWindowBits===!1||typeof r.serverMaxWindowBits=="number"&&r.serverMaxWindowBits>s.server_max_window_bits)||typeof r.clientMaxWindowBits=="number"&&!s.client_max_window_bits));if(!n)throw new Error("None of the extension offers can be accepted");return r.serverNoContextTakeover&&(n.server_no_context_takeover=!0),r.clientNoContextTakeover&&(n.client_no_context_takeover=!0),typeof r.serverMaxWindowBits=="number"&&(n.server_max_window_bits=r.serverMaxWindowBits),typeof r.clientMaxWindowBits=="number"?n.client_max_window_bits=r.clientMaxWindowBits:(n.client_max_window_bits===!0||r.clientMaxWindowBits===!1)&&delete n.client_max_window_bits,n}acceptAsClient(e){let r=e[0];if(this._options.clientNoContextTakeover===!1&&r.client_no_context_takeover)throw new Error('Unexpected parameter "client_no_context_takeover"');if(!r.client_max_window_bits)typeof this._options.clientMaxWindowBits=="number"&&(r.client_max_window_bits=this._options.clientMaxWindowBits);else if(this._options.clientMaxWindowBits===!1||typeof this._options.clientMaxWindowBits=="number"&&r.client_max_window_bits>this._options.clientMaxWindowBits)throw new Error('Unexpected or invalid parameter "client_max_window_bits"');return r}normalizeParams(e){return e.forEach(r=>{Object.keys(r).forEach(n=>{let s=r[n];if(s.length>1)throw new Error(`Parameter "${n}" must have only a single value`);if(s=s[0],n==="client_max_window_bits"){if(s!==!0){let i=+s;if(!Number.isInteger(i)||i<8||i>15)throw new TypeError(`Invalid value for parameter "${n}": ${s}`);s=i}else if(!this._isServer)throw new TypeError(`Invalid value for parameter "${n}": ${s}`)}else if(n==="server_max_window_bits"){let i=+s;if(!Number.isInteger(i)||i<8||i>15)throw new TypeError(`Invalid value for parameter "${n}": ${s}`);s=i}else if(n==="client_no_context_takeover"||n==="server_no_context_takeover"){if(s!==!0)throw new TypeError(`Invalid value for parameter "${n}": ${s}`)}else throw new Error(`Unknown parameter "${n}"`);r[n]=s})}),e}decompress(e,r,n){On.add(s=>{this._decompress(e,r,(i,a)=>{s(),n(i,a)})})}compress(e,r,n){On.add(s=>{this._compress(e,r,(i,a)=>{s(),n(i,a)})})}_decompress(e,r,n){let s=this._isServer?"client":"server";if(!this._inflate){let i=`${s}_max_window_bits`,a=typeof this.params[i]!="number"?Tr.Z_DEFAULT_WINDOWBITS:this.params[i];this._inflate=Tr.createInflateRaw({...this._options.zlibInflateOptions,windowBits:a}),this._inflate[Un]=this,this._inflate[$e]=0,this._inflate[ht]=[],this._inflate.on("error",ou),this._inflate.on("data",_a)}this._inflate[Or]=n,this._inflate.write(e),r&&this._inflate.write(iu),this._inflate.flush(()=>{let i=this._inflate[Cn];if(i){this._inflate.close(),this._inflate=null,n(i);return}let a=xa.concat(this._inflate[ht],this._inflate[$e]);this._inflate._readableState.endEmitted?(this._inflate.close(),this._inflate=null):(this._inflate[$e]=0,this._inflate[ht]=[],r&&this.params[`${s}_no_context_takeover`]&&this._inflate.reset()),n(null,a)})}_compress(e,r,n){let s=this._isServer?"server":"client";if(!this._deflate){let i=`${s}_max_window_bits`,a=typeof this.params[i]!="number"?Tr.Z_DEFAULT_WINDOWBITS:this.params[i];this._deflate=Tr.createDeflateRaw({...this._options.zlibDeflateOptions,windowBits:a}),this._deflate[$e]=0,this._deflate[ht]=[],this._deflate.on("data",au)}this._deflate[Or]=n,this._deflate.write(e),this._deflate.flush(Tr.Z_SYNC_FLUSH,()=>{if(!this._deflate)return;let i=xa.concat(this._deflate[ht],this._deflate[$e]);r&&(i=new su(i.buffer,i.byteOffset,i.length-4)),this._deflate[Or]=null,this._deflate[$e]=0,this._deflate[ht]=[],r&&this.params[`${s}_no_context_takeover`]&&this._deflate.reset(),n(null,i)})}};va.exports=Us;function au(t){this[ht].push(t),this[$e]+=t.length}function _a(t){if(this[$e]+=t.length,this[Un]._maxPayload<1||this[$e]<=this[Un]._maxPayload){this[ht].push(t);return}this[Cn]=new RangeError("Max payload size exceeded"),this[Cn].code="WS_ERR_UNSUPPORTED_MESSAGE_LENGTH",this[Cn][ba]=1009,this.removeListener("data",_a),this.reset()}function ou(t){this[Un]._inflate=null,t[ba]=1007,this[Or](t)}});var Ur=se((jh,In)=>{"use strict";var{isUtf8:wa}=require("buffer"),cu=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1,0,0,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0];function lu(t){return t>=1e3&&t<=1014&&t!==1004&&t!==1005&&t!==1006||t>=3e3&&t<=4999}function Is(t){let e=t.length,r=0;for(;r<e;)if(!(t[r]&128))r++;else if((t[r]&224)===192){if(r+1===e||(t[r+1]&192)!==128||(t[r]&254)===192)return!1;r+=2}else if((t[r]&240)===224){if(r+2>=e||(t[r+1]&192)!==128||(t[r+2]&192)!==128||t[r]===224&&(t[r+1]&224)===128||t[r]===237&&(t[r+1]&224)===160)return!1;r+=3}else if((t[r]&248)===240){if(r+3>=e||(t[r+1]&192)!==128||(t[r+2]&192)!==128||(t[r+3]&192)!==128||t[r]===240&&(t[r+1]&240)===128||t[r]===244&&t[r+1]>143||t[r]>244)return!1;r+=4}else return!1;return!0}In.exports={isValidStatusCode:lu,isValidUTF8:Is,tokenChars:cu};if(wa)In.exports.isValidUTF8=function(t){return t.length<24?Is(t):wa(t)};else if(!process.env.WS_NO_UTF_8_VALIDATE)try{let t=require("utf-8-validate");In.exports.isValidUTF8=function(e){return e.length<32?Is(e):t(e)}}catch{}});var Rn=se((Dh,Ca)=>{"use strict";var{Writable:uu}=require("stream"),ka=Cr(),{BINARY_TYPES:fu,EMPTY_BUFFER:Sa,kStatusCode:du,kWebSocket:hu}=dt(),{concat:Ls,toArrayBuffer:pu,unmask:mu}=Ar(),{isValidStatusCode:yu,isValidUTF8:Ea}=Ur(),Ln=Buffer[Symbol.species],Ir=0,Aa=1,Ta=2,Oa=3,Rs=4,gu=5,Ms=class extends uu{constructor(e={}){super(),this._binaryType=e.binaryType||fu[0],this._extensions=e.extensions||{},this._isServer=!!e.isServer,this._maxPayload=e.maxPayload|0,this._skipUTF8Validation=!!e.skipUTF8Validation,this[hu]=void 0,this._bufferedBytes=0,this._buffers=[],this._compressed=!1,this._payloadLength=0,this._mask=void 0,this._fragmented=0,this._masked=!1,this._fin=!1,this._opcode=0,this._totalPayloadLength=0,this._messageLength=0,this._fragments=[],this._state=Ir,this._loop=!1}_write(e,r,n){if(this._opcode===8&&this._state==Ir)return n();this._bufferedBytes+=e.length,this._buffers.push(e),this.startLoop(n)}consume(e){if(this._bufferedBytes-=e,e===this._buffers[0].length)return this._buffers.shift();if(e<this._buffers[0].length){let n=this._buffers[0];return this._buffers[0]=new Ln(n.buffer,n.byteOffset+e,n.length-e),new Ln(n.buffer,n.byteOffset,e)}let r=Buffer.allocUnsafe(e);do{let n=this._buffers[0],s=r.length-e;e>=n.length?r.set(this._buffers.shift(),s):(r.set(new Uint8Array(n.buffer,n.byteOffset,e),s),this._buffers[0]=new Ln(n.buffer,n.byteOffset+e,n.length-e)),e-=n.length}while(e>0);return r}startLoop(e){let r;this._loop=!0;do switch(this._state){case Ir:r=this.getInfo();break;case Aa:r=this.getPayloadLength16();break;case Ta:r=this.getPayloadLength64();break;case Oa:this.getMask();break;case Rs:r=this.getData(e);break;default:this._loop=!1;return}while(this._loop);e(r)}getInfo(){if(this._bufferedBytes<2){this._loop=!1;return}let e=this.consume(2);if(e[0]&48)return this._loop=!1,ne(RangeError,"RSV2 and RSV3 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_2_3");let r=(e[0]&64)===64;if(r&&!this._extensions[ka.extensionName])return this._loop=!1,ne(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");if(this._fin=(e[0]&128)===128,this._opcode=e[0]&15,this._payloadLength=e[1]&127,this._opcode===0){if(r)return this._loop=!1,ne(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");if(!this._fragmented)return this._loop=!1,ne(RangeError,"invalid opcode 0",!0,1002,"WS_ERR_INVALID_OPCODE");this._opcode=this._fragmented}else if(this._opcode===1||this._opcode===2){if(this._fragmented)return this._loop=!1,ne(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE");this._compressed=r}else if(this._opcode>7&&this._opcode<11){if(!this._fin)return this._loop=!1,ne(RangeError,"FIN must be set",!0,1002,"WS_ERR_EXPECTED_FIN");if(r)return this._loop=!1,ne(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");if(this._payloadLength>125||this._opcode===8&&this._payloadLength===1)return this._loop=!1,ne(RangeError,`invalid payload length ${this._payloadLength}`,!0,1002,"WS_ERR_INVALID_CONTROL_PAYLOAD_LENGTH")}else return this._loop=!1,ne(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE");if(!this._fin&&!this._fragmented&&(this._fragmented=this._opcode),this._masked=(e[1]&128)===128,this._isServer){if(!this._masked)return this._loop=!1,ne(RangeError,"MASK must be set",!0,1002,"WS_ERR_EXPECTED_MASK")}else if(this._masked)return this._loop=!1,ne(RangeError,"MASK must be clear",!0,1002,"WS_ERR_UNEXPECTED_MASK");if(this._payloadLength===126)this._state=Aa;else if(this._payloadLength===127)this._state=Ta;else return this.haveLength()}getPayloadLength16(){if(this._bufferedBytes<2){this._loop=!1;return}return this._payloadLength=this.consume(2).readUInt16BE(0),this.haveLength()}getPayloadLength64(){if(this._bufferedBytes<8){this._loop=!1;return}let e=this.consume(8),r=e.readUInt32BE(0);return r>Math.pow(2,53-32)-1?(this._loop=!1,ne(RangeError,"Unsupported WebSocket frame: payload length > 2^53 - 1",!1,1009,"WS_ERR_UNSUPPORTED_DATA_PAYLOAD_LENGTH")):(this._payloadLength=r*Math.pow(2,32)+e.readUInt32BE(4),this.haveLength())}haveLength(){if(this._payloadLength&&this._opcode<8&&(this._totalPayloadLength+=this._payloadLength,this._totalPayloadLength>this._maxPayload&&this._maxPayload>0))return this._loop=!1,ne(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH");this._masked?this._state=Oa:this._state=Rs}getMask(){if(this._bufferedBytes<4){this._loop=!1;return}this._mask=this.consume(4),this._state=Rs}getData(e){let r=Sa;if(this._payloadLength){if(this._bufferedBytes<this._payloadLength){this._loop=!1;return}r=this.consume(this._payloadLength),this._masked&&this._mask[0]|this._mask[1]|this._mask[2]|this._mask[3]&&mu(r,this._mask)}if(this._opcode>7)return this.controlMessage(r);if(this._compressed){this._state=gu,this.decompress(r,e);return}return r.length&&(this._messageLength=this._totalPayloadLength,this._fragments.push(r)),this.dataMessage()}decompress(e,r){this._extensions[ka.extensionName].decompress(e,this._fin,(s,i)=>{if(s)return r(s);if(i.length){if(this._messageLength+=i.length,this._messageLength>this._maxPayload&&this._maxPayload>0)return r(ne(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH"));this._fragments.push(i)}let a=this.dataMessage();if(a)return r(a);this.startLoop(r)})}dataMessage(){if(this._fin){let e=this._messageLength,r=this._fragments;if(this._totalPayloadLength=0,this._messageLength=0,this._fragmented=0,this._fragments=[],this._opcode===2){let n;this._binaryType==="nodebuffer"?n=Ls(r,e):this._binaryType==="arraybuffer"?n=pu(Ls(r,e)):n=r,this.emit("message",n,!0)}else{let n=Ls(r,e);if(!this._skipUTF8Validation&&!Ea(n))return this._loop=!1,ne(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");this.emit("message",n,!1)}}this._state=Ir}controlMessage(e){if(this._opcode===8)if(this._loop=!1,e.length===0)this.emit("conclude",1005,Sa),this.end();else{let r=e.readUInt16BE(0);if(!yu(r))return ne(RangeError,`invalid status code ${r}`,!0,1002,"WS_ERR_INVALID_CLOSE_CODE");let n=new Ln(e.buffer,e.byteOffset+2,e.length-2);if(!this._skipUTF8Validation&&!Ea(n))return ne(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");this.emit("conclude",r,n),this.end()}else this._opcode===9?this.emit("ping",e):this.emit("pong",e);this._state=Ir}};Ca.exports=Ms;function ne(t,e,r,n,s){let i=new t(r?`Invalid WebSocket frame: ${e}`:e);return Error.captureStackTrace(i,ne),i.code=s,i[du]=n,i}});var Mn=se((zh,La)=>{"use strict";var Vh=require("net"),Fh=require("tls"),{randomFillSync:xu}=require("crypto"),Ua=Cr(),{EMPTY_BUFFER:bu}=dt(),{isValidStatusCode:_u}=Ur(),{mask:Ia,toBuffer:ir}=Ar(),Me=Symbol("kByteLength"),vu=Buffer.alloc(4),Bs=class t{constructor(e,r,n){this._extensions=r||{},n&&(this._generateMask=n,this._maskBuffer=Buffer.alloc(4)),this._socket=e,this._firstFragment=!0,this._compress=!1,this._bufferedBytes=0,this._deflating=!1,this._queue=[]}static frame(e,r){let n,s=!1,i=2,a=!1;r.mask&&(n=r.maskBuffer||vu,r.generateMask?r.generateMask(n):xu(n,0,4),a=(n[0]|n[1]|n[2]|n[3])===0,i=6);let o;typeof e=="string"?(!r.mask||a)&&r[Me]!==void 0?o=r[Me]:(e=Buffer.from(e),o=e.length):(o=e.length,s=r.mask&&r.readOnly&&!a);let l=o;o>=65536?(i+=8,l=127):o>125&&(i+=2,l=126);let c=Buffer.allocUnsafe(s?o+i:i);return c[0]=r.fin?r.opcode|128:r.opcode,r.rsv1&&(c[0]|=64),c[1]=l,l===126?c.writeUInt16BE(o,2):l===127&&(c[2]=c[3]=0,c.writeUIntBE(o,4,6)),r.mask?(c[1]|=128,c[i-4]=n[0],c[i-3]=n[1],c[i-2]=n[2],c[i-1]=n[3],a?[c,e]:s?(Ia(e,n,c,i,o),[c]):(Ia(e,n,e,0,o),[c,e])):[c,e]}close(e,r,n,s){let i;if(e===void 0)i=bu;else{if(typeof e!="number"||!_u(e))throw new TypeError("First argument must be a valid error code number");if(r===void 0||!r.length)i=Buffer.allocUnsafe(2),i.writeUInt16BE(e,0);else{let o=Buffer.byteLength(r);if(o>123)throw new RangeError("The message must not be greater than 123 bytes");i=Buffer.allocUnsafe(2+o),i.writeUInt16BE(e,0),typeof r=="string"?i.write(r,2):i.set(r,2)}}let a={[Me]:i.length,fin:!0,generateMask:this._generateMask,mask:n,maskBuffer:this._maskBuffer,opcode:8,readOnly:!1,rsv1:!1};this._deflating?this.enqueue([this.dispatch,i,!1,a,s]):this.sendFrame(t.frame(i,a),s)}ping(e,r,n){let s,i;if(typeof e=="string"?(s=Buffer.byteLength(e),i=!1):(e=ir(e),s=e.length,i=ir.readOnly),s>125)throw new RangeError("The data size must not be greater than 125 bytes");let a={[Me]:s,fin:!0,generateMask:this._generateMask,mask:r,maskBuffer:this._maskBuffer,opcode:9,readOnly:i,rsv1:!1};this._deflating?this.enqueue([this.dispatch,e,!1,a,n]):this.sendFrame(t.frame(e,a),n)}pong(e,r,n){let s,i;if(typeof e=="string"?(s=Buffer.byteLength(e),i=!1):(e=ir(e),s=e.length,i=ir.readOnly),s>125)throw new RangeError("The data size must not be greater than 125 bytes");let a={[Me]:s,fin:!0,generateMask:this._generateMask,mask:r,maskBuffer:this._maskBuffer,opcode:10,readOnly:i,rsv1:!1};this._deflating?this.enqueue([this.dispatch,e,!1,a,n]):this.sendFrame(t.frame(e,a),n)}send(e,r,n){let s=this._extensions[Ua.extensionName],i=r.binary?2:1,a=r.compress,o,l;if(typeof e=="string"?(o=Buffer.byteLength(e),l=!1):(e=ir(e),o=e.length,l=ir.readOnly),this._firstFragment?(this._firstFragment=!1,a&&s&&s.params[s._isServer?"server_no_context_takeover":"client_no_context_takeover"]&&(a=o>=s._threshold),this._compress=a):(a=!1,i=0),r.fin&&(this._firstFragment=!0),s){let c={[Me]:o,fin:r.fin,generateMask:this._generateMask,mask:r.mask,maskBuffer:this._maskBuffer,opcode:i,readOnly:l,rsv1:a};this._deflating?this.enqueue([this.dispatch,e,this._compress,c,n]):this.dispatch(e,this._compress,c,n)}else this.sendFrame(t.frame(e,{[Me]:o,fin:r.fin,generateMask:this._generateMask,mask:r.mask,maskBuffer:this._maskBuffer,opcode:i,readOnly:l,rsv1:!1}),n)}dispatch(e,r,n,s){if(!r){this.sendFrame(t.frame(e,n),s);return}let i=this._extensions[Ua.extensionName];this._bufferedBytes+=n[Me],this._deflating=!0,i.compress(e,n.fin,(a,o)=>{if(this._socket.destroyed){let l=new Error("The socket was closed while data was being compressed");typeof s=="function"&&s(l);for(let c=0;c<this._queue.length;c++){let f=this._queue[c],d=f[f.length-1];typeof d=="function"&&d(l)}return}this._bufferedBytes-=n[Me],this._deflating=!1,n.readOnly=!1,this.sendFrame(t.frame(o,n),s),this.dequeue()})}dequeue(){for(;!this._deflating&&this._queue.length;){let e=this._queue.shift();this._bufferedBytes-=e[3][Me],Reflect.apply(e[0],this,e.slice(1))}}enqueue(e){this._bufferedBytes+=e[3][Me],this._queue.push(e)}sendFrame(e,r){e.length===2?(this._socket.cork(),this._socket.write(e[0]),this._socket.write(e[1],r),this._socket.uncork()):this._socket.write(e[0],r)}};La.exports=Bs});var Fa=se((qh,Va)=>{"use strict";var{kForOnEventAttribute:Lr,kListener:Ns}=dt(),Ra=Symbol("kCode"),Ma=Symbol("kData"),Ba=Symbol("kError"),Na=Symbol("kMessage"),Pa=Symbol("kReason"),ar=Symbol("kTarget"),ja=Symbol("kType"),Da=Symbol("kWasClean"),Ze=class{constructor(e){this[ar]=null,this[ja]=e}get target(){return this[ar]}get type(){return this[ja]}};Object.defineProperty(Ze.prototype,"target",{enumerable:!0});Object.defineProperty(Ze.prototype,"type",{enumerable:!0});var jt=class extends Ze{constructor(e,r={}){super(e),this[Ra]=r.code===void 0?0:r.code,this[Pa]=r.reason===void 0?"":r.reason,this[Da]=r.wasClean===void 0?!1:r.wasClean}get code(){return this[Ra]}get reason(){return this[Pa]}get wasClean(){return this[Da]}};Object.defineProperty(jt.prototype,"code",{enumerable:!0});Object.defineProperty(jt.prototype,"reason",{enumerable:!0});Object.defineProperty(jt.prototype,"wasClean",{enumerable:!0});var or=class extends Ze{constructor(e,r={}){super(e),this[Ba]=r.error===void 0?null:r.error,this[Na]=r.message===void 0?"":r.message}get error(){return this[Ba]}get message(){return this[Na]}};Object.defineProperty(or.prototype,"error",{enumerable:!0});Object.defineProperty(or.prototype,"message",{enumerable:!0});var Rr=class extends Ze{constructor(e,r={}){super(e),this[Ma]=r.data===void 0?null:r.data}get data(){return this[Ma]}};Object.defineProperty(Rr.prototype,"data",{enumerable:!0});var wu={addEventListener(t,e,r={}){for(let s of this.listeners(t))if(!r[Lr]&&s[Ns]===e&&!s[Lr])return;let n;if(t==="message")n=function(i,a){let o=new Rr("message",{data:a?i:i.toString()});o[ar]=this,Bn(e,this,o)};else if(t==="close")n=function(i,a){let o=new jt("close",{code:i,reason:a.toString(),wasClean:this._closeFrameReceived&&this._closeFrameSent});o[ar]=this,Bn(e,this,o)};else if(t==="error")n=function(i){let a=new or("error",{error:i,message:i.message});a[ar]=this,Bn(e,this,a)};else if(t==="open")n=function(){let i=new Ze("open");i[ar]=this,Bn(e,this,i)};else return;n[Lr]=!!r[Lr],n[Ns]=e,r.once?this.once(t,n):this.on(t,n)},removeEventListener(t,e){for(let r of this.listeners(t))if(r[Ns]===e&&!r[Lr]){this.removeListener(t,r);break}}};Va.exports={CloseEvent:jt,ErrorEvent:or,Event:Ze,EventTarget:wu,MessageEvent:Rr};function Bn(t,e,r){typeof t=="object"&&t.handleEvent?t.handleEvent.call(t,r):t.call(e,r)}});var Ps=se((Wh,za)=>{"use strict";var{tokenChars:Mr}=Ur();function De(t,e,r){t[e]===void 0?t[e]=[r]:t[e].push(r)}function ku(t){let e=Object.create(null),r=Object.create(null),n=!1,s=!1,i=!1,a,o,l=-1,c=-1,f=-1,d=0;for(;d<t.length;d++)if(c=t.charCodeAt(d),a===void 0)if(f===-1&&Mr[c]===1)l===-1&&(l=d);else if(d!==0&&(c===32||c===9))f===-1&&l!==-1&&(f=d);else if(c===59||c===44){if(l===-1)throw new SyntaxError(`Unexpected character at index ${d}`);f===-1&&(f=d);let k=t.slice(l,f);c===44?(De(e,k,r),r=Object.create(null)):a=k,l=f=-1}else throw new SyntaxError(`Unexpected character at index ${d}`);else if(o===void 0)if(f===-1&&Mr[c]===1)l===-1&&(l=d);else if(c===32||c===9)f===-1&&l!==-1&&(f=d);else if(c===59||c===44){if(l===-1)throw new SyntaxError(`Unexpected character at index ${d}`);f===-1&&(f=d),De(r,t.slice(l,f),!0),c===44&&(De(e,a,r),r=Object.create(null),a=void 0),l=f=-1}else if(c===61&&l!==-1&&f===-1)o=t.slice(l,d),l=f=-1;else throw new SyntaxError(`Unexpected character at index ${d}`);else if(s){if(Mr[c]!==1)throw new SyntaxError(`Unexpected character at index ${d}`);l===-1?l=d:n||(n=!0),s=!1}else if(i)if(Mr[c]===1)l===-1&&(l=d);else if(c===34&&l!==-1)i=!1,f=d;else if(c===92)s=!0;else throw new SyntaxError(`Unexpected character at index ${d}`);else if(c===34&&t.charCodeAt(d-1)===61)i=!0;else if(f===-1&&Mr[c]===1)l===-1&&(l=d);else if(l!==-1&&(c===32||c===9))f===-1&&(f=d);else if(c===59||c===44){if(l===-1)throw new SyntaxError(`Unexpected character at index ${d}`);f===-1&&(f=d);let k=t.slice(l,f);n&&(k=k.replace(/\\/g,""),n=!1),De(r,o,k),c===44&&(De(e,a,r),r=Object.create(null),a=void 0),o=void 0,l=f=-1}else throw new SyntaxError(`Unexpected character at index ${d}`);if(l===-1||i||c===32||c===9)throw new SyntaxError("Unexpected end of input");f===-1&&(f=d);let y=t.slice(l,f);return a===void 0?De(e,y,r):(o===void 0?De(r,y,!0):n?De(r,o,y.replace(/\\/g,"")):De(r,o,y),De(e,a,r)),e}function Su(t){return Object.keys(t).map(e=>{let r=t[e];return Array.isArray(r)||(r=[r]),r.map(n=>[e].concat(Object.keys(n).map(s=>{let i=n[s];return Array.isArray(i)||(i=[i]),i.map(a=>a===!0?s:`${s}=${a}`).join("; ")})).join("; ")).join(", ")}).join(", ")}za.exports={format:Su,parse:ku}});var Dn=se(($h,Qa)=>{"use strict";var Eu=require("events"),Au=require("https"),Tu=require("http"),Ha=require("net"),Ou=require("tls"),{randomBytes:Cu,createHash:Uu}=require("crypto"),{Readable:Hh}=require("stream"),{URL:js}=require("url"),pt=Cr(),Iu=Rn(),Lu=Mn(),{BINARY_TYPES:qa,EMPTY_BUFFER:Nn,GUID:Ru,kForOnEventAttribute:Ds,kListener:Mu,kStatusCode:Bu,kWebSocket:oe,NOOP:$a}=dt(),{EventTarget:{addEventListener:Nu,removeEventListener:Pu}}=Fa(),{format:ju,parse:Du}=Ps(),{toBuffer:Vu}=Ar(),Fu=30*1e3,Za=Symbol("kAborted"),Vs=[8,13],Ge=["CONNECTING","OPEN","CLOSING","CLOSED"],zu=/^[!#$%&'*+\-.0-9A-Z^_`|a-z~]+$/,X=class t extends Eu{constructor(e,r,n){super(),this._binaryType=qa[0],this._closeCode=1006,this._closeFrameReceived=!1,this._closeFrameSent=!1,this._closeMessage=Nn,this._closeTimer=null,this._extensions={},this._paused=!1,this._protocol="",this._readyState=t.CONNECTING,this._receiver=null,this._sender=null,this._socket=null,e!==null?(this._bufferedAmount=0,this._isServer=!1,this._redirects=0,r===void 0?r=[]:Array.isArray(r)||(typeof r=="object"&&r!==null?(n=r,r=[]):r=[r]),Ga(this,e,r,n)):this._isServer=!0}get binaryType(){return this._binaryType}set binaryType(e){qa.includes(e)&&(this._binaryType=e,this._receiver&&(this._receiver._binaryType=e))}get bufferedAmount(){return this._socket?this._socket._writableState.length+this._sender._bufferedBytes:this._bufferedAmount}get extensions(){return Object.keys(this._extensions).join()}get isPaused(){return this._paused}get onclose(){return null}get onerror(){return null}get onopen(){return null}get onmessage(){return null}get protocol(){return this._protocol}get readyState(){return this._readyState}get url(){return this._url}setSocket(e,r,n){let s=new Iu({binaryType:this.binaryType,extensions:this._extensions,isServer:this._isServer,maxPayload:n.maxPayload,skipUTF8Validation:n.skipUTF8Validation});this._sender=new Lu(e,this._extensions,n.generateMask),this._receiver=s,this._socket=e,s[oe]=this,e[oe]=this,s.on("conclude",Hu),s.on("drain",$u),s.on("error",Zu),s.on("message",Gu),s.on("ping",Ku),s.on("pong",Yu),e.setTimeout(0),e.setNoDelay(),r.length>0&&e.unshift(r),e.on("close",Ya),e.on("data",jn),e.on("end",Xa),e.on("error",Ja),this._readyState=t.OPEN,this.emit("open")}emitClose(){if(!this._socket){this._readyState=t.CLOSED,this.emit("close",this._closeCode,this._closeMessage);return}this._extensions[pt.extensionName]&&this._extensions[pt.extensionName].cleanup(),this._receiver.removeAllListeners(),this._readyState=t.CLOSED,this.emit("close",this._closeCode,this._closeMessage)}close(e,r){if(this.readyState!==t.CLOSED){if(this.readyState===t.CONNECTING){let n="WebSocket was closed before the connection was established";be(this,this._req,n);return}if(this.readyState===t.CLOSING){this._closeFrameSent&&(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end();return}this._readyState=t.CLOSING,this._sender.close(e,r,!this._isServer,n=>{n||(this._closeFrameSent=!0,(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end())}),this._closeTimer=setTimeout(this._socket.destroy.bind(this._socket),Fu)}}pause(){this.readyState===t.CONNECTING||this.readyState===t.CLOSED||(this._paused=!0,this._socket.pause())}ping(e,r,n){if(this.readyState===t.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if(typeof e=="function"?(n=e,e=r=void 0):typeof r=="function"&&(n=r,r=void 0),typeof e=="number"&&(e=e.toString()),this.readyState!==t.OPEN){Fs(this,e,n);return}r===void 0&&(r=!this._isServer),this._sender.ping(e||Nn,r,n)}pong(e,r,n){if(this.readyState===t.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if(typeof e=="function"?(n=e,e=r=void 0):typeof r=="function"&&(n=r,r=void 0),typeof e=="number"&&(e=e.toString()),this.readyState!==t.OPEN){Fs(this,e,n);return}r===void 0&&(r=!this._isServer),this._sender.pong(e||Nn,r,n)}resume(){this.readyState===t.CONNECTING||this.readyState===t.CLOSED||(this._paused=!1,this._receiver._writableState.needDrain||this._socket.resume())}send(e,r,n){if(this.readyState===t.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if(typeof r=="function"&&(n=r,r={}),typeof e=="number"&&(e=e.toString()),this.readyState!==t.OPEN){Fs(this,e,n);return}let s={binary:typeof e!="string",mask:!this._isServer,compress:!0,fin:!0,...r};this._extensions[pt.extensionName]||(s.compress=!1),this._sender.send(e||Nn,s,n)}terminate(){if(this.readyState!==t.CLOSED){if(this.readyState===t.CONNECTING){let e="WebSocket was closed before the connection was established";be(this,this._req,e);return}this._socket&&(this._readyState=t.CLOSING,this._socket.destroy())}}};Object.defineProperty(X,"CONNECTING",{enumerable:!0,value:Ge.indexOf("CONNECTING")});Object.defineProperty(X.prototype,"CONNECTING",{enumerable:!0,value:Ge.indexOf("CONNECTING")});Object.defineProperty(X,"OPEN",{enumerable:!0,value:Ge.indexOf("OPEN")});Object.defineProperty(X.prototype,"OPEN",{enumerable:!0,value:Ge.indexOf("OPEN")});Object.defineProperty(X,"CLOSING",{enumerable:!0,value:Ge.indexOf("CLOSING")});Object.defineProperty(X.prototype,"CLOSING",{enumerable:!0,value:Ge.indexOf("CLOSING")});Object.defineProperty(X,"CLOSED",{enumerable:!0,value:Ge.indexOf("CLOSED")});Object.defineProperty(X.prototype,"CLOSED",{enumerable:!0,value:Ge.indexOf("CLOSED")});["binaryType","bufferedAmount","extensions","isPaused","protocol","readyState","url"].forEach(t=>{Object.defineProperty(X.prototype,t,{enumerable:!0})});["open","error","close","message"].forEach(t=>{Object.defineProperty(X.prototype,`on${t}`,{enumerable:!0,get(){for(let e of this.listeners(t))if(e[Ds])return e[Mu];return null},set(e){for(let r of this.listeners(t))if(r[Ds]){this.removeListener(t,r);break}typeof e=="function"&&this.addEventListener(t,e,{[Ds]:!0})}})});X.prototype.addEventListener=Nu;X.prototype.removeEventListener=Pu;Qa.exports=X;function Ga(t,e,r,n){let s={protocolVersion:Vs[1],maxPayload:104857600,skipUTF8Validation:!1,perMessageDeflate:!0,followRedirects:!1,maxRedirects:10,...n,createConnection:void 0,socketPath:void 0,hostname:void 0,protocol:void 0,timeout:void 0,method:"GET",host:void 0,path:void 0,port:void 0};if(!Vs.includes(s.protocolVersion))throw new RangeError(`Unsupported protocol version: ${s.protocolVersion} (supported versions: ${Vs.join(", ")})`);let i;if(e instanceof js)i=e,t._url=e.href;else{try{i=new js(e)}catch{throw new SyntaxError(`Invalid URL: ${e}`)}t._url=e}let a=i.protocol==="wss:",o=i.protocol==="ws+unix:",l;if(i.protocol!=="ws:"&&!a&&!o?l=`The URL's protocol must be one of "ws:", "wss:", or "ws+unix:"`:o&&!i.pathname?l="The URL's pathname is empty":i.hash&&(l="The URL contains a fragment identifier"),l){let _=new SyntaxError(l);if(t._redirects===0)throw _;Pn(t,_);return}let c=a?443:80,f=Cu(16).toString("base64"),d=a?Au.request:Tu.request,y=new Set,k;if(s.createConnection=a?Wu:qu,s.defaultPort=s.defaultPort||c,s.port=i.port||c,s.host=i.hostname.startsWith("[")?i.hostname.slice(1,-1):i.hostname,s.headers={...s.headers,"Sec-WebSocket-Version":s.protocolVersion,"Sec-WebSocket-Key":f,Connection:"Upgrade",Upgrade:"websocket"},s.path=i.pathname+i.search,s.timeout=s.handshakeTimeout,s.perMessageDeflate&&(k=new pt(s.perMessageDeflate!==!0?s.perMessageDeflate:{},!1,s.maxPayload),s.headers["Sec-WebSocket-Extensions"]=ju({[pt.extensionName]:k.offer()})),r.length){for(let _ of r){if(typeof _!="string"||!zu.test(_)||y.has(_))throw new SyntaxError("An invalid or duplicated subprotocol was specified");y.add(_)}s.headers["Sec-WebSocket-Protocol"]=r.join(",")}if(s.origin&&(s.protocolVersion<13?s.headers["Sec-WebSocket-Origin"]=s.origin:s.headers.Origin=s.origin),(i.username||i.password)&&(s.auth=`${i.username}:${i.password}`),o){let _=s.path.split(":");s.socketPath=_[0],s.path=_[1]}let w;if(s.followRedirects){if(t._redirects===0){t._originalIpc=o,t._originalSecure=a,t._originalHostOrSocketPath=o?s.socketPath:i.host;let _=n&&n.headers;if(n={...n,headers:{}},_)for(let[C,H]of Object.entries(_))n.headers[C.toLowerCase()]=H}else if(t.listenerCount("redirect")===0){let _=o?t._originalIpc?s.socketPath===t._originalHostOrSocketPath:!1:t._originalIpc?!1:i.host===t._originalHostOrSocketPath;(!_||t._originalSecure&&!a)&&(delete s.headers.authorization,delete s.headers.cookie,_||delete s.headers.host,s.auth=void 0)}s.auth&&!n.headers.authorization&&(n.headers.authorization="Basic "+Buffer.from(s.auth).toString("base64")),w=t._req=d(s),t._redirects&&t.emit("redirect",t.url,w)}else w=t._req=d(s);s.timeout&&w.on("timeout",()=>{be(t,w,"Opening handshake has timed out")}),w.on("error",_=>{w===null||w[Za]||(w=t._req=null,Pn(t,_))}),w.on("response",_=>{let C=_.headers.location,H=_.statusCode;if(C&&s.followRedirects&&H>=300&&H<400){if(++t._redirects>s.maxRedirects){be(t,w,"Maximum redirects exceeded");return}w.abort();let B;try{B=new js(C,e)}catch{let U=new SyntaxError(`Invalid URL: ${C}`);Pn(t,U);return}Ga(t,B,r,n)}else t.emit("unexpected-response",w,_)||be(t,w,`Unexpected server response: ${_.statusCode}`)}),w.on("upgrade",(_,C,H)=>{if(t.emit("upgrade",_),t.readyState!==X.CONNECTING)return;if(w=t._req=null,_.headers.upgrade.toLowerCase()!=="websocket"){be(t,C,"Invalid Upgrade header");return}let B=Uu("sha1").update(f+Ru).digest("base64");if(_.headers["sec-websocket-accept"]!==B){be(t,C,"Invalid Sec-WebSocket-Accept header");return}let L=_.headers["sec-websocket-protocol"],U;if(L!==void 0?y.size?y.has(L)||(U="Server sent an invalid subprotocol"):U="Server sent a subprotocol but none was requested":y.size&&(U="Server sent no subprotocol"),U){be(t,C,U);return}L&&(t._protocol=L);let ce=_.headers["sec-websocket-extensions"];if(ce!==void 0){if(!k){be(t,C,"Server sent a Sec-WebSocket-Extensions header but no extension was requested");return}let pe;try{pe=Du(ce)}catch{be(t,C,"Invalid Sec-WebSocket-Extensions header");return}let fe=Object.keys(pe);if(fe.length!==1||fe[0]!==pt.extensionName){be(t,C,"Server indicated an extension that was not requested");return}try{k.accept(pe[pt.extensionName])}catch{be(t,C,"Invalid Sec-WebSocket-Extensions header");return}t._extensions[pt.extensionName]=k}t.setSocket(C,H,{generateMask:s.generateMask,maxPayload:s.maxPayload,skipUTF8Validation:s.skipUTF8Validation})}),s.finishRequest?s.finishRequest(w,t):w.end()}function Pn(t,e){t._readyState=X.CLOSING,t.emit("error",e),t.emitClose()}function qu(t){return t.path=t.socketPath,Ha.connect(t)}function Wu(t){return t.path=void 0,!t.servername&&t.servername!==""&&(t.servername=Ha.isIP(t.host)?"":t.host),Ou.connect(t)}function be(t,e,r){t._readyState=X.CLOSING;let n=new Error(r);Error.captureStackTrace(n,be),e.setHeader?(e[Za]=!0,e.abort(),e.socket&&!e.socket.destroyed&&e.socket.destroy(),process.nextTick(Pn,t,n)):(e.destroy(n),e.once("error",t.emit.bind(t,"error")),e.once("close",t.emitClose.bind(t)))}function Fs(t,e,r){if(e){let n=Vu(e).length;t._socket?t._sender._bufferedBytes+=n:t._bufferedAmount+=n}if(r){let n=new Error(`WebSocket is not open: readyState ${t.readyState} (${Ge[t.readyState]})`);process.nextTick(r,n)}}function Hu(t,e){let r=this[oe];r._closeFrameReceived=!0,r._closeMessage=e,r._closeCode=t,r._socket[oe]!==void 0&&(r._socket.removeListener("data",jn),process.nextTick(Ka,r._socket),t===1005?r.close():r.close(t,e))}function $u(){let t=this[oe];t.isPaused||t._socket.resume()}function Zu(t){let e=this[oe];e._socket[oe]!==void 0&&(e._socket.removeListener("data",jn),process.nextTick(Ka,e._socket),e.close(t[Bu])),e.emit("error",t)}function Wa(){this[oe].emitClose()}function Gu(t,e){this[oe].emit("message",t,e)}function Ku(t){let e=this[oe];e.pong(t,!e._isServer,$a),e.emit("ping",t)}function Yu(t){this[oe].emit("pong",t)}function Ka(t){t.resume()}function Ya(){let t=this[oe];this.removeListener("close",Ya),this.removeListener("data",jn),this.removeListener("end",Xa),t._readyState=X.CLOSING;let e;!this._readableState.endEmitted&&!t._closeFrameReceived&&!t._receiver._writableState.errorEmitted&&(e=t._socket.read())!==null&&t._receiver.write(e),t._receiver.end(),this[oe]=void 0,clearTimeout(t._closeTimer),t._receiver._writableState.finished||t._receiver._writableState.errorEmitted?t.emitClose():(t._receiver.on("error",Wa),t._receiver.on("finish",Wa))}function jn(t){this[oe]._receiver.write(t)||this.pause()}function Xa(){let t=this[oe];t._readyState=X.CLOSING,t._receiver.end(),this.end()}function Ja(){let t=this[oe];this.removeListener("error",Ja),this.on("error",$a),t&&(t._readyState=X.CLOSING,this.destroy())}});var to=se((Zh,eo)=>{"use strict";var{tokenChars:Xu}=Ur();function Ju(t){let e=new Set,r=-1,n=-1,s=0;for(s;s<t.length;s++){let a=t.charCodeAt(s);if(n===-1&&Xu[a]===1)r===-1&&(r=s);else if(s!==0&&(a===32||a===9))n===-1&&r!==-1&&(n=s);else if(a===44){if(r===-1)throw new SyntaxError(`Unexpected character at index ${s}`);n===-1&&(n=s);let o=t.slice(r,n);if(e.has(o))throw new SyntaxError(`The "${o}" subprotocol is duplicated`);e.add(o),r=n=-1}else throw new SyntaxError(`Unexpected character at index ${s}`)}if(r===-1||n!==-1)throw new SyntaxError("Unexpected end of input");let i=t.slice(r,s);if(e.has(i))throw new SyntaxError(`The "${i}" subprotocol is duplicated`);return e.add(i),e}eo.exports={parse:Ju}});var qs=se((Xh,oo)=>{"use strict";var Qu=require("events"),Vn=require("http"),Gh=require("https"),Kh=require("net"),Yh=require("tls"),{createHash:ef}=require("crypto"),ro=Ps(),Dt=Cr(),tf=to(),rf=Dn(),{GUID:nf,kWebSocket:sf}=dt(),af=/^[+/0-9A-Za-z]{22}==$/,no=0,so=1,ao=2,zs=class extends Qu{constructor(e,r){if(super(),e={maxPayload:100*1024*1024,skipUTF8Validation:!1,perMessageDeflate:!1,handleProtocols:null,clientTracking:!0,verifyClient:null,noServer:!1,backlog:null,server:null,host:null,path:null,port:null,WebSocket:rf,...e},e.port==null&&!e.server&&!e.noServer||e.port!=null&&(e.server||e.noServer)||e.server&&e.noServer)throw new TypeError('One and only one of the "port", "server", or "noServer" options must be specified');if(e.port!=null?(this._server=Vn.createServer((n,s)=>{let i=Vn.STATUS_CODES[426];s.writeHead(426,{"Content-Length":i.length,"Content-Type":"text/plain"}),s.end(i)}),this._server.listen(e.port,e.host,e.backlog,r)):e.server&&(this._server=e.server),this._server){let n=this.emit.bind(this,"connection");this._removeListeners=of(this._server,{listening:this.emit.bind(this,"listening"),error:this.emit.bind(this,"error"),upgrade:(s,i,a)=>{this.handleUpgrade(s,i,a,n)}})}e.perMessageDeflate===!0&&(e.perMessageDeflate={}),e.clientTracking&&(this.clients=new Set,this._shouldEmitClose=!1),this.options=e,this._state=no}address(){if(this.options.noServer)throw new Error('The server is operating in "noServer" mode');return this._server?this._server.address():null}close(e){if(this._state===ao){e&&this.once("close",()=>{e(new Error("The server is not running"))}),process.nextTick(Br,this);return}if(e&&this.once("close",e),this._state!==so)if(this._state=so,this.options.noServer||this.options.server)this._server&&(this._removeListeners(),this._removeListeners=this._server=null),this.clients?this.clients.size?this._shouldEmitClose=!0:process.nextTick(Br,this):process.nextTick(Br,this);else{let r=this._server;this._removeListeners(),this._removeListeners=this._server=null,r.close(()=>{Br(this)})}}shouldHandle(e){if(this.options.path){let r=e.url.indexOf("?");if((r!==-1?e.url.slice(0,r):e.url)!==this.options.path)return!1}return!0}handleUpgrade(e,r,n,s){r.on("error",io);let i=e.headers["sec-websocket-key"],a=+e.headers["sec-websocket-version"];if(e.method!=="GET"){Vt(this,e,r,405,"Invalid HTTP method");return}if(e.headers.upgrade.toLowerCase()!=="websocket"){Vt(this,e,r,400,"Invalid Upgrade header");return}if(!i||!af.test(i)){Vt(this,e,r,400,"Missing or invalid Sec-WebSocket-Key header");return}if(a!==8&&a!==13){Vt(this,e,r,400,"Missing or invalid Sec-WebSocket-Version header");return}if(!this.shouldHandle(e)){Nr(r,400);return}let o=e.headers["sec-websocket-protocol"],l=new Set;if(o!==void 0)try{l=tf.parse(o)}catch{Vt(this,e,r,400,"Invalid Sec-WebSocket-Protocol header");return}let c=e.headers["sec-websocket-extensions"],f={};if(this.options.perMessageDeflate&&c!==void 0){let d=new Dt(this.options.perMessageDeflate,!0,this.options.maxPayload);try{let y=ro.parse(c);y[Dt.extensionName]&&(d.accept(y[Dt.extensionName]),f[Dt.extensionName]=d)}catch{Vt(this,e,r,400,"Invalid or unacceptable Sec-WebSocket-Extensions header");return}}if(this.options.verifyClient){let d={origin:e.headers[`${a===8?"sec-websocket-origin":"origin"}`],secure:!!(e.socket.authorized||e.socket.encrypted),req:e};if(this.options.verifyClient.length===2){this.options.verifyClient(d,(y,k,w,_)=>{if(!y)return Nr(r,k||401,w,_);this.completeUpgrade(f,i,l,e,r,n,s)});return}if(!this.options.verifyClient(d))return Nr(r,401)}this.completeUpgrade(f,i,l,e,r,n,s)}completeUpgrade(e,r,n,s,i,a,o){if(!i.readable||!i.writable)return i.destroy();if(i[sf])throw new Error("server.handleUpgrade() was called more than once with the same socket, possibly due to a misconfiguration");if(this._state>no)return Nr(i,503);let c=["HTTP/1.1 101 Switching Protocols","Upgrade: websocket","Connection: Upgrade",`Sec-WebSocket-Accept: ${ef("sha1").update(r+nf).digest("base64")}`],f=new this.options.WebSocket(null);if(n.size){let d=this.options.handleProtocols?this.options.handleProtocols(n,s):n.values().next().value;d&&(c.push(`Sec-WebSocket-Protocol: ${d}`),f._protocol=d)}if(e[Dt.extensionName]){let d=e[Dt.extensionName].params,y=ro.format({[Dt.extensionName]:[d]});c.push(`Sec-WebSocket-Extensions: ${y}`),f._extensions=e}this.emit("headers",c,s),i.write(c.concat(`\r
`).join(`\r
`)),i.removeListener("error",io),f.setSocket(i,a,{maxPayload:this.options.maxPayload,skipUTF8Validation:this.options.skipUTF8Validation}),this.clients&&(this.clients.add(f),f.on("close",()=>{this.clients.delete(f),this._shouldEmitClose&&!this.clients.size&&process.nextTick(Br,this)})),o(f,s)}};oo.exports=zs;function of(t,e){for(let r of Object.keys(e))t.on(r,e[r]);return function(){for(let n of Object.keys(e))t.removeListener(n,e[n])}}function Br(t){t._state=ao,t.emit("close")}function io(){this.destroy()}function Nr(t,e,r,n){r=r||Vn.STATUS_CODES[e],n={Connection:"close","Content-Type":"text/html","Content-Length":Buffer.byteLength(r),...n},t.once("finish",t.destroy),t.end(`HTTP/1.1 ${e} ${Vn.STATUS_CODES[e]}\r
`+Object.keys(n).map(s=>`${s}: ${n[s]}`).join(`\r
`)+`\r
\r
`+r)}function Vt(t,e,r,n,s){if(t.listenerCount("wsClientError")){let i=new Error(s);Error.captureStackTrace(i,Vt),t.emit("wsClientError",i,r,e)}else Nr(r,n,s)}});var lo=se((tp,co)=>{"use strict";var Ke=Dn();Ke.createWebSocketStream=Es();Ke.Server=qs();Ke.Receiver=Rn();Ke.Sender=Mn();Ke.WebSocket=Ke;Ke.WebSocketServer=Ke.Server;co.exports=Ke});var fo=se((rp,uo)=>{"use strict";uo.exports=lo()});var Fe=new WeakMap,Xe=new WeakMap,Be=new WeakMap;var Dr=Symbol("anyProducer"),Gs=Promise.resolve(),Vr=Symbol("listenerAdded"),Fr=Symbol("listenerRemoved"),zr=!1,Hn=!1;function zt(t){if(typeof t!="string"&&typeof t!="symbol"&&typeof t!="number")throw new TypeError("`eventName` must be a string, symbol, or number")}function Pr(t){if(typeof t!="function")throw new TypeError("listener must be a function")}function qt(t,e){let r=Xe.get(t);if(r.has(e))return r.get(e)}function cr(t,e){let r=typeof e=="string"||typeof e=="symbol"||typeof e=="number"?e:Dr,n=Be.get(t);if(n.has(r))return n.get(r)}function _o(t,e,r){let n=Be.get(t);if(n.has(e))for(let s of n.get(e))s.enqueue(r);if(n.has(Dr)){let s=Promise.all([e,r]);for(let i of n.get(Dr))i.enqueue(s)}}function Ks(t,e){e=Array.isArray(e)?e:[e];let r=!1,n=()=>{},s=[],i={enqueue(a){s.push(a),n()},finish(){r=!0,n()}};for(let a of e){let o=cr(t,a);o||(o=new Set,Be.get(t).set(a,o)),o.add(i)}return{async next(){return s?s.length===0?r?(s=void 0,this.next()):(await new Promise(a=>{n=a}),this.next()):{done:!1,value:await s.shift()}:{done:!0}},async return(a){s=void 0;for(let o of e){let l=cr(t,o);l&&(l.delete(i),l.size===0&&Be.get(t).delete(o))}return n(),arguments.length>0?{done:!0,value:await a}:{done:!0}},[Symbol.asyncIterator](){return this}}}function Ys(t){if(t===void 0)return Xs;if(!Array.isArray(t))throw new TypeError("`methodNames` must be an array of strings");for(let e of t)if(!Xs.includes(e))throw typeof e!="string"?new TypeError("`methodNames` element must be a string"):new Error(`${e} is not Emittery method`);return t}var Wt=t=>t===Vr||t===Fr;function jr(t,e,r){if(Wt(e))try{zr=!0,t.emit(e,r)}finally{zr=!1}}var _e=class t{static mixin(e,r){return r=Ys(r),n=>{if(typeof n!="function")throw new TypeError("`target` must be function");for(let a of r)if(n.prototype[a]!==void 0)throw new Error(`The property \`${a}\` already exists on \`target\``);function s(){return Object.defineProperty(this,e,{enumerable:!1,value:new t}),this[e]}Object.defineProperty(n.prototype,e,{enumerable:!1,get:s});let i=a=>function(...o){return this[e][a](...o)};for(let a of r)Object.defineProperty(n.prototype,a,{enumerable:!1,value:i(a)});return n}}static get isDebugEnabled(){if(typeof globalThis.process?.env!="object")return Hn;let{env:e}=globalThis.process??{env:{}};return e.DEBUG==="emittery"||e.DEBUG==="*"||Hn}static set isDebugEnabled(e){Hn=e}constructor(e={}){Fe.set(this,new Set),Xe.set(this,new Map),Be.set(this,new Map),Be.get(this).set(Dr,new Set),this.debug=e.debug??{},this.debug.enabled===void 0&&(this.debug.enabled=!1),this.debug.logger||(this.debug.logger=(r,n,s,i)=>{try{i=JSON.stringify(i)}catch{i=`Object with the following keys failed to stringify: ${Object.keys(i).join(",")}`}(typeof s=="symbol"||typeof s=="number")&&(s=s.toString());let a=new Date,o=`${a.getHours()}:${a.getMinutes()}:${a.getSeconds()}.${a.getMilliseconds()}`;console.log(`[${o}][emittery:${r}][${n}] Event Name: ${s}
	data: ${i}`)})}logIfDebugEnabled(e,r,n){(t.isDebugEnabled||this.debug.enabled)&&this.debug.logger(e,this.debug.name,r,n)}on(e,r){Pr(r),e=Array.isArray(e)?e:[e];for(let n of e){zt(n);let s=qt(this,n);s||(s=new Set,Xe.get(this).set(n,s)),s.add(r),this.logIfDebugEnabled("subscribe",n,void 0),Wt(n)||jr(this,Vr,{eventName:n,listener:r})}return this.off.bind(this,e,r)}off(e,r){Pr(r),e=Array.isArray(e)?e:[e];for(let n of e){zt(n);let s=qt(this,n);s&&(s.delete(r),s.size===0&&Xe.get(this).delete(n)),this.logIfDebugEnabled("unsubscribe",n,void 0),Wt(n)||jr(this,Fr,{eventName:n,listener:r})}}once(e){let r,n=new Promise(s=>{r=this.on(e,i=>{r(),s(i)})});return n.off=r,n}events(e){e=Array.isArray(e)?e:[e];for(let r of e)zt(r);return Ks(this,e)}async emit(e,r){if(zt(e),Wt(e)&&!zr)throw new TypeError("`eventName` cannot be meta event `listenerAdded` or `listenerRemoved`");this.logIfDebugEnabled("emit",e,r),_o(this,e,r);let n=qt(this,e)??new Set,s=Fe.get(this),i=[...n],a=Wt(e)?[]:[...s];await Gs,await Promise.all([...i.map(async o=>{if(n.has(o))return o(r)}),...a.map(async o=>{if(s.has(o))return o(e,r)})])}async emitSerial(e,r){if(zt(e),Wt(e)&&!zr)throw new TypeError("`eventName` cannot be meta event `listenerAdded` or `listenerRemoved`");this.logIfDebugEnabled("emitSerial",e,r);let n=qt(this,e)??new Set,s=Fe.get(this),i=[...n],a=[...s];await Gs;for(let o of i)n.has(o)&&await o(r);for(let o of a)s.has(o)&&await o(e,r)}onAny(e){return Pr(e),this.logIfDebugEnabled("subscribeAny",void 0,void 0),Fe.get(this).add(e),jr(this,Vr,{listener:e}),this.offAny.bind(this,e)}anyEvent(){return Ks(this)}offAny(e){Pr(e),this.logIfDebugEnabled("unsubscribeAny",void 0,void 0),jr(this,Fr,{listener:e}),Fe.get(this).delete(e)}clearListeners(e){e=Array.isArray(e)?e:[e];for(let r of e)if(this.logIfDebugEnabled("clear",r,void 0),typeof r=="string"||typeof r=="symbol"||typeof r=="number"){let n=qt(this,r);n&&n.clear();let s=cr(this,r);if(s){for(let i of s)i.finish();s.clear()}}else{Fe.get(this).clear();for(let[n,s]of Xe.get(this).entries())s.clear(),Xe.get(this).delete(n);for(let[n,s]of Be.get(this).entries()){for(let i of s)i.finish();s.clear(),Be.get(this).delete(n)}}}listenerCount(e){e=Array.isArray(e)?e:[e];let r=0;for(let n of e){if(typeof n=="string"){r+=Fe.get(this).size+(qt(this,n)?.size??0)+(cr(this,n)?.size??0)+(cr(this)?.size??0);continue}typeof n<"u"&&zt(n),r+=Fe.get(this).size;for(let s of Xe.get(this).values())r+=s.size;for(let s of Be.get(this).values())r+=s.size}return r}bindMethods(e,r){if(typeof e!="object"||e===null)throw new TypeError("`target` must be an object");r=Ys(r);for(let n of r){if(e[n]!==void 0)throw new Error(`The property \`${n}\` already exists on \`target\``);Object.defineProperty(e,n,{enumerable:!1,value:this[n].bind(this)})}}},Xs=Object.getOwnPropertyNames(_e.prototype).filter(t=>t!=="constructor");Object.defineProperty(_e,"listenerAdded",{value:Vr,writable:!1,enumerable:!0,configurable:!1});Object.defineProperty(_e,"listenerRemoved",{value:Fr,writable:!1,enumerable:!0,configurable:!1});var Z;(function(t){t.assertEqual=s=>s;function e(s){}t.assertIs=e;function r(s){throw new Error}t.assertNever=r,t.arrayToEnum=s=>{let i={};for(let a of s)i[a]=a;return i},t.getValidEnumValues=s=>{let i=t.objectKeys(s).filter(o=>typeof s[s[o]]!="number"),a={};for(let o of i)a[o]=s[o];return t.objectValues(a)},t.objectValues=s=>t.objectKeys(s).map(function(i){return s[i]}),t.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{let i=[];for(let a in s)Object.prototype.hasOwnProperty.call(s,a)&&i.push(a);return i},t.find=(s,i)=>{for(let a of s)if(i(a))return a},t.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&isFinite(s)&&Math.floor(s)===s;function n(s,i=" | "){return s.map(a=>typeof a=="string"?`'${a}'`:a).join(i)}t.joinValues=n,t.jsonStringifyReplacer=(s,i)=>typeof i=="bigint"?i.toString():i})(Z||(Z={}));var $n;(function(t){t.mergeShapes=(e,r)=>({...e,...r})})($n||($n={}));var S=Z.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Je=t=>{switch(typeof t){case"undefined":return S.undefined;case"string":return S.string;case"number":return isNaN(t)?S.nan:S.number;case"boolean":return S.boolean;case"function":return S.function;case"bigint":return S.bigint;case"symbol":return S.symbol;case"object":return Array.isArray(t)?S.array:t===null?S.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?S.promise:typeof Map<"u"&&t instanceof Map?S.map:typeof Set<"u"&&t instanceof Set?S.set:typeof Date<"u"&&t instanceof Date?S.date:S.object;default:return S.unknown}},b=Z.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),vo=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:"),me=class extends Error{constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};let r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){let r=e||function(i){return i.message},n={_errors:[]},s=i=>{for(let a of i.issues)if(a.code==="invalid_union")a.unionErrors.map(s);else if(a.code==="invalid_return_type")s(a.returnTypeError);else if(a.code==="invalid_arguments")s(a.argumentsError);else if(a.path.length===0)n._errors.push(r(a));else{let o=n,l=0;for(;l<a.path.length;){let c=a.path[l];l===a.path.length-1?(o[c]=o[c]||{_errors:[]},o[c]._errors.push(r(a))):o[c]=o[c]||{_errors:[]},o=o[c],l++}}};return s(this),n}toString(){return this.message}get message(){return JSON.stringify(this.issues,Z.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=r=>r.message){let r={},n=[];for(let s of this.issues)s.path.length>0?(r[s.path[0]]=r[s.path[0]]||[],r[s.path[0]].push(e(s))):n.push(e(s));return{formErrors:n,fieldErrors:r}}get formErrors(){return this.flatten()}};me.create=t=>new me(t);var lr=(t,e)=>{let r;switch(t.code){case b.invalid_type:t.received===S.undefined?r="Required":r=`Expected ${t.expected}, received ${t.received}`;break;case b.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(t.expected,Z.jsonStringifyReplacer)}`;break;case b.unrecognized_keys:r=`Unrecognized key(s) in object: ${Z.joinValues(t.keys,", ")}`;break;case b.invalid_union:r="Invalid input";break;case b.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${Z.joinValues(t.options)}`;break;case b.invalid_enum_value:r=`Invalid enum value. Expected ${Z.joinValues(t.options)}, received '${t.received}'`;break;case b.invalid_arguments:r="Invalid function arguments";break;case b.invalid_return_type:r="Invalid function return type";break;case b.invalid_date:r="Invalid date";break;case b.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(r=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?r=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?r=`Invalid input: must end with "${t.validation.endsWith}"`:Z.assertNever(t.validation):t.validation!=="regex"?r=`Invalid ${t.validation}`:r="Invalid";break;case b.too_small:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:r="Invalid input";break;case b.too_big:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?r=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:r="Invalid input";break;case b.custom:r="Invalid input";break;case b.invalid_intersection_types:r="Intersection results could not be merged";break;case b.not_multiple_of:r=`Number must be a multiple of ${t.multipleOf}`;break;case b.not_finite:r="Number must be finite";break;default:r=e.defaultError,Z.assertNever(t)}return{message:r}},ei=lr;function wo(t){ei=t}function Wr(){return ei}var Hr=t=>{let{data:e,path:r,errorMaps:n,issueData:s}=t,i=[...r,...s.path||[]],a={...s,path:i},o="",l=n.filter(c=>!!c).slice().reverse();for(let c of l)o=c(a,{data:e,defaultError:o}).message;return{...s,path:i,message:s.message||o}},ko=[];function A(t,e){let r=Hr({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,Wr(),lr].filter(n=>!!n)});t.common.issues.push(r)}var ae=class t{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,r){let n=[];for(let s of r){if(s.status==="aborted")return N;s.status==="dirty"&&e.dirty(),n.push(s.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,r){let n=[];for(let s of r)n.push({key:await s.key,value:await s.value});return t.mergeObjectSync(e,n)}static mergeObjectSync(e,r){let n={};for(let s of r){let{key:i,value:a}=s;if(i.status==="aborted"||a.status==="aborted")return N;i.status==="dirty"&&e.dirty(),a.status==="dirty"&&e.dirty(),(typeof a.value<"u"||s.alwaysSet)&&(n[i.value]=a.value)}return{status:e.value,value:n}}},N=Object.freeze({status:"aborted"}),ti=t=>({status:"dirty",value:t}),le=t=>({status:"valid",value:t}),Zn=t=>t.status==="aborted",Gn=t=>t.status==="dirty",$r=t=>t.status==="valid",Zr=t=>typeof Promise<"u"&&t instanceof Promise,R;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e?.message})(R||(R={}));var ve=class{constructor(e,r,n,s){this._cachedPath=[],this.parent=e,this.data=r,this._path=n,this._key=s}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}},Js=(t,e)=>{if($r(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let r=new me(t.common.issues);return this._error=r,this._error}}};function j(t){if(!t)return{};let{errorMap:e,invalid_type_error:r,required_error:n,description:s}=t;if(e&&(r||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(a,o)=>a.code!=="invalid_type"?{message:o.defaultError}:typeof o.data>"u"?{message:n??o.defaultError}:{message:r??o.defaultError},description:s}}var D=class{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return Je(e.data)}_getOrReturnCtx(e,r){return r||{common:e.parent.common,data:e.data,parsedType:Je(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new ae,ctx:{common:e.parent.common,data:e.data,parsedType:Je(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let r=this._parse(e);if(Zr(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(e){let r=this._parse(e);return Promise.resolve(r)}parse(e,r){let n=this.safeParse(e,r);if(n.success)return n.data;throw n.error}safeParse(e,r){var n;let s={common:{issues:[],async:(n=r?.async)!==null&&n!==void 0?n:!1,contextualErrorMap:r?.errorMap},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Je(e)},i=this._parseSync({data:e,path:s.path,parent:s});return Js(s,i)}async parseAsync(e,r){let n=await this.safeParseAsync(e,r);if(n.success)return n.data;throw n.error}async safeParseAsync(e,r){let n={common:{issues:[],contextualErrorMap:r?.errorMap,async:!0},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Je(e)},s=this._parse({data:e,path:n.path,parent:n}),i=await(Zr(s)?s:Promise.resolve(s));return Js(n,i)}refine(e,r){let n=s=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(s):r;return this._refinement((s,i)=>{let a=e(s),o=()=>i.addIssue({code:b.custom,...n(s)});return typeof Promise<"u"&&a instanceof Promise?a.then(l=>l?!0:(o(),!1)):a?!0:(o(),!1)})}refinement(e,r){return this._refinement((n,s)=>e(n)?!0:(s.addIssue(typeof r=="function"?r(n,s):r),!1))}_refinement(e){return new ye({schema:this,typeName:M.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return ke.create(this,this._def)}nullable(){return We.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return qe.create(this,this._def)}promise(){return tt.create(this,this._def)}or(e){return kt.create([this,e],this._def)}and(e){return St.create(this,e,this._def)}transform(e){return new ye({...j(this._def),schema:this,typeName:M.ZodEffects,effect:{type:"transform",transform:e}})}default(e){let r=typeof e=="function"?e:()=>e;return new Ct({...j(this._def),innerType:this,defaultValue:r,typeName:M.ZodDefault})}brand(){return new Xr({typeName:M.ZodBranded,type:this,...j(this._def)})}catch(e){let r=typeof e=="function"?e:()=>e;return new Yt({...j(this._def),innerType:this,catchValue:r,typeName:M.ZodCatch})}describe(e){let r=this.constructor;return new r({...this._def,description:e})}pipe(e){return ur.create(this,e)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}},So=/^c[^\s-]{8,}$/i,Eo=/^[a-z][a-z0-9]*$/,Ao=/[0-9A-HJKMNP-TV-Z]{26}/,To=/^([a-f0-9]{8}-[a-f0-9]{4}-[1-5][a-f0-9]{3}-[a-f0-9]{4}-[a-f0-9]{12}|00000000-0000-0000-0000-000000000000)$/i,Oo=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\])|(\[IPv6:(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))\])|([A-Za-z0-9]([A-Za-z0-9-]*[A-Za-z0-9])*(\.[A-Za-z]{2,})+))$/,Co=/^(\p{Extended_Pictographic}|\p{Emoji_Component})+$/u,Uo=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,Io=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,Lo=t=>t.precision?t.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}Z$`):t.precision===0?t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$");function Ro(t,e){return!!((e==="v4"||!e)&&Uo.test(t)||(e==="v6"||!e)&&Io.test(t))}var Qe=class t extends D{constructor(){super(...arguments),this._regex=(e,r,n)=>this.refinement(s=>e.test(s),{validation:r,code:b.invalid_string,...R.errToObj(n)}),this.nonempty=e=>this.min(1,R.errToObj(e)),this.trim=()=>new t({...this._def,checks:[...this._def.checks,{kind:"trim"}]}),this.toLowerCase=()=>new t({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]}),this.toUpperCase=()=>new t({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==S.string){let i=this._getOrReturnCtx(e);return A(i,{code:b.invalid_type,expected:S.string,received:i.parsedType}),N}let n=new ae,s;for(let i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(s=this._getOrReturnCtx(e,s),A(s,{code:b.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),n.dirty());else if(i.kind==="max")e.data.length>i.value&&(s=this._getOrReturnCtx(e,s),A(s,{code:b.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),n.dirty());else if(i.kind==="length"){let a=e.data.length>i.value,o=e.data.length<i.value;(a||o)&&(s=this._getOrReturnCtx(e,s),a?A(s,{code:b.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):o&&A(s,{code:b.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),n.dirty())}else if(i.kind==="email")Oo.test(e.data)||(s=this._getOrReturnCtx(e,s),A(s,{validation:"email",code:b.invalid_string,message:i.message}),n.dirty());else if(i.kind==="emoji")Co.test(e.data)||(s=this._getOrReturnCtx(e,s),A(s,{validation:"emoji",code:b.invalid_string,message:i.message}),n.dirty());else if(i.kind==="uuid")To.test(e.data)||(s=this._getOrReturnCtx(e,s),A(s,{validation:"uuid",code:b.invalid_string,message:i.message}),n.dirty());else if(i.kind==="cuid")So.test(e.data)||(s=this._getOrReturnCtx(e,s),A(s,{validation:"cuid",code:b.invalid_string,message:i.message}),n.dirty());else if(i.kind==="cuid2")Eo.test(e.data)||(s=this._getOrReturnCtx(e,s),A(s,{validation:"cuid2",code:b.invalid_string,message:i.message}),n.dirty());else if(i.kind==="ulid")Ao.test(e.data)||(s=this._getOrReturnCtx(e,s),A(s,{validation:"ulid",code:b.invalid_string,message:i.message}),n.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),A(s,{validation:"url",code:b.invalid_string,message:i.message}),n.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),A(s,{validation:"regex",code:b.invalid_string,message:i.message}),n.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(s=this._getOrReturnCtx(e,s),A(s,{code:b.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),n.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(s=this._getOrReturnCtx(e,s),A(s,{code:b.invalid_string,validation:{startsWith:i.value},message:i.message}),n.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(s=this._getOrReturnCtx(e,s),A(s,{code:b.invalid_string,validation:{endsWith:i.value},message:i.message}),n.dirty()):i.kind==="datetime"?Lo(i).test(e.data)||(s=this._getOrReturnCtx(e,s),A(s,{code:b.invalid_string,validation:"datetime",message:i.message}),n.dirty()):i.kind==="ip"?Ro(e.data,i.version)||(s=this._getOrReturnCtx(e,s),A(s,{validation:"ip",code:b.invalid_string,message:i.message}),n.dirty()):Z.assertNever(i);return{status:n.value,value:e.data}}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...R.errToObj(e)})}url(e){return this._addCheck({kind:"url",...R.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...R.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...R.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...R.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...R.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...R.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...R.errToObj(e)})}datetime(e){var r;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:(r=e?.offset)!==null&&r!==void 0?r:!1,...R.errToObj(e?.message)})}regex(e,r){return this._addCheck({kind:"regex",regex:e,...R.errToObj(r)})}includes(e,r){return this._addCheck({kind:"includes",value:e,position:r?.position,...R.errToObj(r?.message)})}startsWith(e,r){return this._addCheck({kind:"startsWith",value:e,...R.errToObj(r)})}endsWith(e,r){return this._addCheck({kind:"endsWith",value:e,...R.errToObj(r)})}min(e,r){return this._addCheck({kind:"min",value:e,...R.errToObj(r)})}max(e,r){return this._addCheck({kind:"max",value:e,...R.errToObj(r)})}length(e,r){return this._addCheck({kind:"length",value:e,...R.errToObj(r)})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get minLength(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxLength(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};Qe.create=t=>{var e;return new Qe({checks:[],typeName:M.ZodString,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...j(t)})};function Mo(t,e){let r=(t.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,s=r>n?r:n,i=parseInt(t.toFixed(s).replace(".","")),a=parseInt(e.toFixed(s).replace(".",""));return i%a/Math.pow(10,s)}var gt=class t extends D{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==S.number){let i=this._getOrReturnCtx(e);return A(i,{code:b.invalid_type,expected:S.number,received:i.parsedType}),N}let n,s=new ae;for(let i of this._def.checks)i.kind==="int"?Z.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),A(n,{code:b.invalid_type,expected:"integer",received:"float",message:i.message}),s.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(n=this._getOrReturnCtx(e,n),A(n,{code:b.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(n=this._getOrReturnCtx(e,n),A(n,{code:b.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="multipleOf"?Mo(e.data,i.value)!==0&&(n=this._getOrReturnCtx(e,n),A(n,{code:b.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),A(n,{code:b.not_finite,message:i.message}),s.dirty()):Z.assertNever(i);return{status:s.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,R.toString(r))}gt(e,r){return this.setLimit("min",e,!1,R.toString(r))}lte(e,r){return this.setLimit("max",e,!0,R.toString(r))}lt(e,r){return this.setLimit("max",e,!1,R.toString(r))}setLimit(e,r,n,s){return new t({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:R.toString(s)}]})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:R.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:R.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:R.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:R.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:R.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:R.toString(r)})}finite(e){return this._addCheck({kind:"finite",message:R.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:R.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:R.toString(e)})}get minValue(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Z.isInteger(e.value))}get isFinite(){let e=null,r=null;for(let n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(r===null||n.value>r)&&(r=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(r)&&Number.isFinite(e)}};gt.create=t=>new gt({checks:[],typeName:M.ZodNumber,coerce:t?.coerce||!1,...j(t)});var xt=class t extends D{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==S.bigint){let i=this._getOrReturnCtx(e);return A(i,{code:b.invalid_type,expected:S.bigint,received:i.parsedType}),N}let n,s=new ae;for(let i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(n=this._getOrReturnCtx(e,n),A(n,{code:b.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(n=this._getOrReturnCtx(e,n),A(n,{code:b.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),A(n,{code:b.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):Z.assertNever(i);return{status:s.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,R.toString(r))}gt(e,r){return this.setLimit("min",e,!1,R.toString(r))}lte(e,r){return this.setLimit("max",e,!0,R.toString(r))}lt(e,r){return this.setLimit("max",e,!1,R.toString(r))}setLimit(e,r,n,s){return new t({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:R.toString(s)}]})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:R.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:R.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:R.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:R.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:R.toString(r)})}get minValue(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};xt.create=t=>{var e;return new xt({checks:[],typeName:M.ZodBigInt,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...j(t)})};var bt=class extends D{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==S.boolean){let n=this._getOrReturnCtx(e);return A(n,{code:b.invalid_type,expected:S.boolean,received:n.parsedType}),N}return le(e.data)}};bt.create=t=>new bt({typeName:M.ZodBoolean,coerce:t?.coerce||!1,...j(t)});var _t=class t extends D{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==S.date){let i=this._getOrReturnCtx(e);return A(i,{code:b.invalid_type,expected:S.date,received:i.parsedType}),N}if(isNaN(e.data.getTime())){let i=this._getOrReturnCtx(e);return A(i,{code:b.invalid_date}),N}let n=new ae,s;for(let i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(s=this._getOrReturnCtx(e,s),A(s,{code:b.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),n.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(s=this._getOrReturnCtx(e,s),A(s,{code:b.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),n.dirty()):Z.assertNever(i);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}min(e,r){return this._addCheck({kind:"min",value:e.getTime(),message:R.toString(r)})}max(e,r){return this._addCheck({kind:"max",value:e.getTime(),message:R.toString(r)})}get minDate(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e!=null?new Date(e):null}};_t.create=t=>new _t({checks:[],coerce:t?.coerce||!1,typeName:M.ZodDate,...j(t)});var $t=class extends D{_parse(e){if(this._getType(e)!==S.symbol){let n=this._getOrReturnCtx(e);return A(n,{code:b.invalid_type,expected:S.symbol,received:n.parsedType}),N}return le(e.data)}};$t.create=t=>new $t({typeName:M.ZodSymbol,...j(t)});var vt=class extends D{_parse(e){if(this._getType(e)!==S.undefined){let n=this._getOrReturnCtx(e);return A(n,{code:b.invalid_type,expected:S.undefined,received:n.parsedType}),N}return le(e.data)}};vt.create=t=>new vt({typeName:M.ZodUndefined,...j(t)});var wt=class extends D{_parse(e){if(this._getType(e)!==S.null){let n=this._getOrReturnCtx(e);return A(n,{code:b.invalid_type,expected:S.null,received:n.parsedType}),N}return le(e.data)}};wt.create=t=>new wt({typeName:M.ZodNull,...j(t)});var et=class extends D{constructor(){super(...arguments),this._any=!0}_parse(e){return le(e.data)}};et.create=t=>new et({typeName:M.ZodAny,...j(t)});var ze=class extends D{constructor(){super(...arguments),this._unknown=!0}_parse(e){return le(e.data)}};ze.create=t=>new ze({typeName:M.ZodUnknown,...j(t)});var Se=class extends D{_parse(e){let r=this._getOrReturnCtx(e);return A(r,{code:b.invalid_type,expected:S.never,received:r.parsedType}),N}};Se.create=t=>new Se({typeName:M.ZodNever,...j(t)});var Zt=class extends D{_parse(e){if(this._getType(e)!==S.undefined){let n=this._getOrReturnCtx(e);return A(n,{code:b.invalid_type,expected:S.void,received:n.parsedType}),N}return le(e.data)}};Zt.create=t=>new Zt({typeName:M.ZodVoid,...j(t)});var qe=class t extends D{_parse(e){let{ctx:r,status:n}=this._processInputParams(e),s=this._def;if(r.parsedType!==S.array)return A(r,{code:b.invalid_type,expected:S.array,received:r.parsedType}),N;if(s.exactLength!==null){let a=r.data.length>s.exactLength.value,o=r.data.length<s.exactLength.value;(a||o)&&(A(r,{code:a?b.too_big:b.too_small,minimum:o?s.exactLength.value:void 0,maximum:a?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),n.dirty())}if(s.minLength!==null&&r.data.length<s.minLength.value&&(A(r,{code:b.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),n.dirty()),s.maxLength!==null&&r.data.length>s.maxLength.value&&(A(r,{code:b.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),n.dirty()),r.common.async)return Promise.all([...r.data].map((a,o)=>s.type._parseAsync(new ve(r,a,r.path,o)))).then(a=>ae.mergeArray(n,a));let i=[...r.data].map((a,o)=>s.type._parseSync(new ve(r,a,r.path,o)));return ae.mergeArray(n,i)}get element(){return this._def.type}min(e,r){return new t({...this._def,minLength:{value:e,message:R.toString(r)}})}max(e,r){return new t({...this._def,maxLength:{value:e,message:R.toString(r)}})}length(e,r){return new t({...this._def,exactLength:{value:e,message:R.toString(r)}})}nonempty(e){return this.min(1,e)}};qe.create=(t,e)=>new qe({type:t,minLength:null,maxLength:null,exactLength:null,typeName:M.ZodArray,...j(e)});function Ht(t){if(t instanceof de){let e={};for(let r in t.shape){let n=t.shape[r];e[r]=ke.create(Ht(n))}return new de({...t._def,shape:()=>e})}else return t instanceof qe?new qe({...t._def,type:Ht(t.element)}):t instanceof ke?ke.create(Ht(t.unwrap())):t instanceof We?We.create(Ht(t.unwrap())):t instanceof Ne?Ne.create(t.items.map(e=>Ht(e))):t}var de=class t extends D{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let e=this._def.shape(),r=Z.objectKeys(e);return this._cached={shape:e,keys:r}}_parse(e){if(this._getType(e)!==S.object){let c=this._getOrReturnCtx(e);return A(c,{code:b.invalid_type,expected:S.object,received:c.parsedType}),N}let{status:n,ctx:s}=this._processInputParams(e),{shape:i,keys:a}=this._getCached(),o=[];if(!(this._def.catchall instanceof Se&&this._def.unknownKeys==="strip"))for(let c in s.data)a.includes(c)||o.push(c);let l=[];for(let c of a){let f=i[c],d=s.data[c];l.push({key:{status:"valid",value:c},value:f._parse(new ve(s,d,s.path,c)),alwaysSet:c in s.data})}if(this._def.catchall instanceof Se){let c=this._def.unknownKeys;if(c==="passthrough")for(let f of o)l.push({key:{status:"valid",value:f},value:{status:"valid",value:s.data[f]}});else if(c==="strict")o.length>0&&(A(s,{code:b.unrecognized_keys,keys:o}),n.dirty());else if(c!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{let c=this._def.catchall;for(let f of o){let d=s.data[f];l.push({key:{status:"valid",value:f},value:c._parse(new ve(s,d,s.path,f)),alwaysSet:f in s.data})}}return s.common.async?Promise.resolve().then(async()=>{let c=[];for(let f of l){let d=await f.key;c.push({key:d,value:await f.value,alwaysSet:f.alwaysSet})}return c}).then(c=>ae.mergeObjectSync(n,c)):ae.mergeObjectSync(n,l)}get shape(){return this._def.shape()}strict(e){return R.errToObj,new t({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(r,n)=>{var s,i,a,o;let l=(a=(i=(s=this._def).errorMap)===null||i===void 0?void 0:i.call(s,r,n).message)!==null&&a!==void 0?a:n.defaultError;return r.code==="unrecognized_keys"?{message:(o=R.errToObj(e).message)!==null&&o!==void 0?o:l}:{message:l}}}:{}})}strip(){return new t({...this._def,unknownKeys:"strip"})}passthrough(){return new t({...this._def,unknownKeys:"passthrough"})}extend(e){return new t({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new t({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:M.ZodObject})}setKey(e,r){return this.augment({[e]:r})}catchall(e){return new t({...this._def,catchall:e})}pick(e){let r={};return Z.objectKeys(e).forEach(n=>{e[n]&&this.shape[n]&&(r[n]=this.shape[n])}),new t({...this._def,shape:()=>r})}omit(e){let r={};return Z.objectKeys(this.shape).forEach(n=>{e[n]||(r[n]=this.shape[n])}),new t({...this._def,shape:()=>r})}deepPartial(){return Ht(this)}partial(e){let r={};return Z.objectKeys(this.shape).forEach(n=>{let s=this.shape[n];e&&!e[n]?r[n]=s:r[n]=s.optional()}),new t({...this._def,shape:()=>r})}required(e){let r={};return Z.objectKeys(this.shape).forEach(n=>{if(e&&!e[n])r[n]=this.shape[n];else{let i=this.shape[n];for(;i instanceof ke;)i=i._def.innerType;r[n]=i}}),new t({...this._def,shape:()=>r})}keyof(){return ri(Z.objectKeys(this.shape))}};de.create=(t,e)=>new de({shape:()=>t,unknownKeys:"strip",catchall:Se.create(),typeName:M.ZodObject,...j(e)});de.strictCreate=(t,e)=>new de({shape:()=>t,unknownKeys:"strict",catchall:Se.create(),typeName:M.ZodObject,...j(e)});de.lazycreate=(t,e)=>new de({shape:t,unknownKeys:"strip",catchall:Se.create(),typeName:M.ZodObject,...j(e)});var kt=class extends D{_parse(e){let{ctx:r}=this._processInputParams(e),n=this._def.options;function s(i){for(let o of i)if(o.result.status==="valid")return o.result;for(let o of i)if(o.result.status==="dirty")return r.common.issues.push(...o.ctx.common.issues),o.result;let a=i.map(o=>new me(o.ctx.common.issues));return A(r,{code:b.invalid_union,unionErrors:a}),N}if(r.common.async)return Promise.all(n.map(async i=>{let a={...r,common:{...r.common,issues:[]},parent:null};return{result:await i._parseAsync({data:r.data,path:r.path,parent:a}),ctx:a}})).then(s);{let i,a=[];for(let l of n){let c={...r,common:{...r.common,issues:[]},parent:null},f=l._parseSync({data:r.data,path:r.path,parent:c});if(f.status==="valid")return f;f.status==="dirty"&&!i&&(i={result:f,ctx:c}),c.common.issues.length&&a.push(c.common.issues)}if(i)return r.common.issues.push(...i.ctx.common.issues),i.result;let o=a.map(l=>new me(l));return A(r,{code:b.invalid_union,unionErrors:o}),N}}get options(){return this._def.options}};kt.create=(t,e)=>new kt({options:t,typeName:M.ZodUnion,...j(e)});var qr=t=>t instanceof Et?qr(t.schema):t instanceof ye?qr(t.innerType()):t instanceof At?[t.value]:t instanceof Tt?t.options:t instanceof Ot?Object.keys(t.enum):t instanceof Ct?qr(t._def.innerType):t instanceof vt?[void 0]:t instanceof wt?[null]:null,Gr=class t extends D{_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==S.object)return A(r,{code:b.invalid_type,expected:S.object,received:r.parsedType}),N;let n=this.discriminator,s=r.data[n],i=this.optionsMap.get(s);return i?r.common.async?i._parseAsync({data:r.data,path:r.path,parent:r}):i._parseSync({data:r.data,path:r.path,parent:r}):(A(r,{code:b.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),N)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,r,n){let s=new Map;for(let i of r){let a=qr(i.shape[e]);if(!a)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let o of a){if(s.has(o))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(o)}`);s.set(o,i)}}return new t({typeName:M.ZodDiscriminatedUnion,discriminator:e,options:r,optionsMap:s,...j(n)})}};function Kn(t,e){let r=Je(t),n=Je(e);if(t===e)return{valid:!0,data:t};if(r===S.object&&n===S.object){let s=Z.objectKeys(e),i=Z.objectKeys(t).filter(o=>s.indexOf(o)!==-1),a={...t,...e};for(let o of i){let l=Kn(t[o],e[o]);if(!l.valid)return{valid:!1};a[o]=l.data}return{valid:!0,data:a}}else if(r===S.array&&n===S.array){if(t.length!==e.length)return{valid:!1};let s=[];for(let i=0;i<t.length;i++){let a=t[i],o=e[i],l=Kn(a,o);if(!l.valid)return{valid:!1};s.push(l.data)}return{valid:!0,data:s}}else return r===S.date&&n===S.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}var St=class extends D{_parse(e){let{status:r,ctx:n}=this._processInputParams(e),s=(i,a)=>{if(Zn(i)||Zn(a))return N;let o=Kn(i.value,a.value);return o.valid?((Gn(i)||Gn(a))&&r.dirty(),{status:r.value,value:o.data}):(A(n,{code:b.invalid_intersection_types}),N)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([i,a])=>s(i,a)):s(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}};St.create=(t,e,r)=>new St({left:t,right:e,typeName:M.ZodIntersection,...j(r)});var Ne=class t extends D{_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==S.array)return A(n,{code:b.invalid_type,expected:S.array,received:n.parsedType}),N;if(n.data.length<this._def.items.length)return A(n,{code:b.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),N;!this._def.rest&&n.data.length>this._def.items.length&&(A(n,{code:b.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());let i=[...n.data].map((a,o)=>{let l=this._def.items[o]||this._def.rest;return l?l._parse(new ve(n,a,n.path,o)):null}).filter(a=>!!a);return n.common.async?Promise.all(i).then(a=>ae.mergeArray(r,a)):ae.mergeArray(r,i)}get items(){return this._def.items}rest(e){return new t({...this._def,rest:e})}};Ne.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Ne({items:t,typeName:M.ZodTuple,rest:null,...j(e)})};var Kr=class t extends D{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==S.object)return A(n,{code:b.invalid_type,expected:S.object,received:n.parsedType}),N;let s=[],i=this._def.keyType,a=this._def.valueType;for(let o in n.data)s.push({key:i._parse(new ve(n,o,n.path,o)),value:a._parse(new ve(n,n.data[o],n.path,o))});return n.common.async?ae.mergeObjectAsync(r,s):ae.mergeObjectSync(r,s)}get element(){return this._def.valueType}static create(e,r,n){return r instanceof D?new t({keyType:e,valueType:r,typeName:M.ZodRecord,...j(n)}):new t({keyType:Qe.create(),valueType:e,typeName:M.ZodRecord,...j(r)})}},Gt=class extends D{_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==S.map)return A(n,{code:b.invalid_type,expected:S.map,received:n.parsedType}),N;let s=this._def.keyType,i=this._def.valueType,a=[...n.data.entries()].map(([o,l],c)=>({key:s._parse(new ve(n,o,n.path,[c,"key"])),value:i._parse(new ve(n,l,n.path,[c,"value"]))}));if(n.common.async){let o=new Map;return Promise.resolve().then(async()=>{for(let l of a){let c=await l.key,f=await l.value;if(c.status==="aborted"||f.status==="aborted")return N;(c.status==="dirty"||f.status==="dirty")&&r.dirty(),o.set(c.value,f.value)}return{status:r.value,value:o}})}else{let o=new Map;for(let l of a){let c=l.key,f=l.value;if(c.status==="aborted"||f.status==="aborted")return N;(c.status==="dirty"||f.status==="dirty")&&r.dirty(),o.set(c.value,f.value)}return{status:r.value,value:o}}}};Gt.create=(t,e,r)=>new Gt({valueType:e,keyType:t,typeName:M.ZodMap,...j(r)});var Kt=class t extends D{_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==S.set)return A(n,{code:b.invalid_type,expected:S.set,received:n.parsedType}),N;let s=this._def;s.minSize!==null&&n.data.size<s.minSize.value&&(A(n,{code:b.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),r.dirty()),s.maxSize!==null&&n.data.size>s.maxSize.value&&(A(n,{code:b.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),r.dirty());let i=this._def.valueType;function a(l){let c=new Set;for(let f of l){if(f.status==="aborted")return N;f.status==="dirty"&&r.dirty(),c.add(f.value)}return{status:r.value,value:c}}let o=[...n.data.values()].map((l,c)=>i._parse(new ve(n,l,n.path,c)));return n.common.async?Promise.all(o).then(l=>a(l)):a(o)}min(e,r){return new t({...this._def,minSize:{value:e,message:R.toString(r)}})}max(e,r){return new t({...this._def,maxSize:{value:e,message:R.toString(r)}})}size(e,r){return this.min(e,r).max(e,r)}nonempty(e){return this.min(1,e)}};Kt.create=(t,e)=>new Kt({valueType:t,minSize:null,maxSize:null,typeName:M.ZodSet,...j(e)});var Yr=class t extends D{constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==S.function)return A(r,{code:b.invalid_type,expected:S.function,received:r.parsedType}),N;function n(o,l){return Hr({data:o,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,Wr(),lr].filter(c=>!!c),issueData:{code:b.invalid_arguments,argumentsError:l}})}function s(o,l){return Hr({data:o,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,Wr(),lr].filter(c=>!!c),issueData:{code:b.invalid_return_type,returnTypeError:l}})}let i={errorMap:r.common.contextualErrorMap},a=r.data;return this._def.returns instanceof tt?le(async(...o)=>{let l=new me([]),c=await this._def.args.parseAsync(o,i).catch(y=>{throw l.addIssue(n(o,y)),l}),f=await a(...c);return await this._def.returns._def.type.parseAsync(f,i).catch(y=>{throw l.addIssue(s(f,y)),l})}):le((...o)=>{let l=this._def.args.safeParse(o,i);if(!l.success)throw new me([n(o,l.error)]);let c=a(...l.data),f=this._def.returns.safeParse(c,i);if(!f.success)throw new me([s(c,f.error)]);return f.data})}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new t({...this._def,args:Ne.create(e).rest(ze.create())})}returns(e){return new t({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,r,n){return new t({args:e||Ne.create([]).rest(ze.create()),returns:r||ze.create(),typeName:M.ZodFunction,...j(n)})}},Et=class extends D{get schema(){return this._def.getter()}_parse(e){let{ctx:r}=this._processInputParams(e);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}};Et.create=(t,e)=>new Et({getter:t,typeName:M.ZodLazy,...j(e)});var At=class extends D{_parse(e){if(e.data!==this._def.value){let r=this._getOrReturnCtx(e);return A(r,{received:r.data,code:b.invalid_literal,expected:this._def.value}),N}return{status:"valid",value:e.data}}get value(){return this._def.value}};At.create=(t,e)=>new At({value:t,typeName:M.ZodLiteral,...j(e)});function ri(t,e){return new Tt({values:t,typeName:M.ZodEnum,...j(e)})}var Tt=class t extends D{_parse(e){if(typeof e.data!="string"){let r=this._getOrReturnCtx(e),n=this._def.values;return A(r,{expected:Z.joinValues(n),received:r.parsedType,code:b.invalid_type}),N}if(this._def.values.indexOf(e.data)===-1){let r=this._getOrReturnCtx(e),n=this._def.values;return A(r,{received:r.data,code:b.invalid_enum_value,options:n}),N}return le(e.data)}get options(){return this._def.values}get enum(){let e={};for(let r of this._def.values)e[r]=r;return e}get Values(){let e={};for(let r of this._def.values)e[r]=r;return e}get Enum(){let e={};for(let r of this._def.values)e[r]=r;return e}extract(e){return t.create(e)}exclude(e){return t.create(this.options.filter(r=>!e.includes(r)))}};Tt.create=ri;var Ot=class extends D{_parse(e){let r=Z.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==S.string&&n.parsedType!==S.number){let s=Z.objectValues(r);return A(n,{expected:Z.joinValues(s),received:n.parsedType,code:b.invalid_type}),N}if(r.indexOf(e.data)===-1){let s=Z.objectValues(r);return A(n,{received:n.data,code:b.invalid_enum_value,options:s}),N}return le(e.data)}get enum(){return this._def.values}};Ot.create=(t,e)=>new Ot({values:t,typeName:M.ZodNativeEnum,...j(e)});var tt=class extends D{unwrap(){return this._def.type}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==S.promise&&r.common.async===!1)return A(r,{code:b.invalid_type,expected:S.promise,received:r.parsedType}),N;let n=r.parsedType===S.promise?r.data:Promise.resolve(r.data);return le(n.then(s=>this._def.type.parseAsync(s,{path:r.path,errorMap:r.common.contextualErrorMap})))}};tt.create=(t,e)=>new tt({type:t,typeName:M.ZodPromise,...j(e)});var ye=class extends D{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===M.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:r,ctx:n}=this._processInputParams(e),s=this._def.effect||null;if(s.type==="preprocess"){let a=s.transform(n.data);return n.common.async?Promise.resolve(a).then(o=>this._def.schema._parseAsync({data:o,path:n.path,parent:n})):this._def.schema._parseSync({data:a,path:n.path,parent:n})}let i={addIssue:a=>{A(n,a),a.fatal?r.abort():r.dirty()},get path(){return n.path}};if(i.addIssue=i.addIssue.bind(i),s.type==="refinement"){let a=o=>{let l=s.refinement(o,i);if(n.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return o};if(n.common.async===!1){let o=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return o.status==="aborted"?N:(o.status==="dirty"&&r.dirty(),a(o.value),{status:r.value,value:o.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(o=>o.status==="aborted"?N:(o.status==="dirty"&&r.dirty(),a(o.value).then(()=>({status:r.value,value:o.value}))))}if(s.type==="transform")if(n.common.async===!1){let a=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!$r(a))return a;let o=s.transform(a.value,i);if(o instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:o}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(a=>$r(a)?Promise.resolve(s.transform(a.value,i)).then(o=>({status:r.value,value:o})):a);Z.assertNever(s)}};ye.create=(t,e,r)=>new ye({schema:t,typeName:M.ZodEffects,effect:e,...j(r)});ye.createWithPreprocess=(t,e,r)=>new ye({schema:e,effect:{type:"preprocess",transform:t},typeName:M.ZodEffects,...j(r)});var ke=class extends D{_parse(e){return this._getType(e)===S.undefined?le(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};ke.create=(t,e)=>new ke({innerType:t,typeName:M.ZodOptional,...j(e)});var We=class extends D{_parse(e){return this._getType(e)===S.null?le(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};We.create=(t,e)=>new We({innerType:t,typeName:M.ZodNullable,...j(e)});var Ct=class extends D{_parse(e){let{ctx:r}=this._processInputParams(e),n=r.data;return r.parsedType===S.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:r.path,parent:r})}removeDefault(){return this._def.innerType}};Ct.create=(t,e)=>new Ct({innerType:t,typeName:M.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...j(e)});var Yt=class extends D{_parse(e){let{ctx:r}=this._processInputParams(e),n={...r,common:{...r.common,issues:[]}},s=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return Zr(s)?s.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new me(n.common.issues)},input:n.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new me(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}};Yt.create=(t,e)=>new Yt({innerType:t,typeName:M.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...j(e)});var Xt=class extends D{_parse(e){if(this._getType(e)!==S.nan){let n=this._getOrReturnCtx(e);return A(n,{code:b.invalid_type,expected:S.nan,received:n.parsedType}),N}return{status:"valid",value:e.data}}};Xt.create=t=>new Xt({typeName:M.ZodNaN,...j(t)});var Bo=Symbol("zod_brand"),Xr=class extends D{_parse(e){let{ctx:r}=this._processInputParams(e),n=r.data;return this._def.type._parse({data:n,path:r.path,parent:r})}unwrap(){return this._def.type}},ur=class t extends D{_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.common.async)return(async()=>{let i=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?N:i.status==="dirty"?(r.dirty(),ti(i.value)):this._def.out._parseAsync({data:i.value,path:n.path,parent:n})})();{let s=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return s.status==="aborted"?N:s.status==="dirty"?(r.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:n.path,parent:n})}}static create(e,r){return new t({in:e,out:r,typeName:M.ZodPipeline})}},ni=(t,e={},r)=>t?et.create().superRefine((n,s)=>{var i,a;if(!t(n)){let o=typeof e=="function"?e(n):typeof e=="string"?{message:e}:e,l=(a=(i=o.fatal)!==null&&i!==void 0?i:r)!==null&&a!==void 0?a:!0,c=typeof o=="string"?{message:o}:o;s.addIssue({code:"custom",...c,fatal:l})}}):et.create(),No={object:de.lazycreate},M;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline"})(M||(M={}));var Po=(t,e={message:`Input not instance of ${t.name}`})=>ni(r=>r instanceof t,e),si=Qe.create,ii=gt.create,jo=Xt.create,Do=xt.create,ai=bt.create,Vo=_t.create,Fo=$t.create,zo=vt.create,qo=wt.create,Wo=et.create,Ho=ze.create,$o=Se.create,Zo=Zt.create,Go=qe.create,Ko=de.create,Yo=de.strictCreate,Xo=kt.create,Jo=Gr.create,Qo=St.create,ec=Ne.create,tc=Kr.create,rc=Gt.create,nc=Kt.create,sc=Yr.create,ic=Et.create,ac=At.create,oc=Tt.create,cc=Ot.create,lc=tt.create,Qs=ye.create,uc=ke.create,fc=We.create,dc=ye.createWithPreprocess,hc=ur.create,pc=()=>si().optional(),mc=()=>ii().optional(),yc=()=>ai().optional(),gc={string:t=>Qe.create({...t,coerce:!0}),number:t=>gt.create({...t,coerce:!0}),boolean:t=>bt.create({...t,coerce:!0}),bigint:t=>xt.create({...t,coerce:!0}),date:t=>_t.create({...t,coerce:!0})},xc=N,Ee=Object.freeze({__proto__:null,defaultErrorMap:lr,setErrorMap:wo,getErrorMap:Wr,makeIssue:Hr,EMPTY_PATH:ko,addIssueToContext:A,ParseStatus:ae,INVALID:N,DIRTY:ti,OK:le,isAborted:Zn,isDirty:Gn,isValid:$r,isAsync:Zr,get util(){return Z},get objectUtil(){return $n},ZodParsedType:S,getParsedType:Je,ZodType:D,ZodString:Qe,ZodNumber:gt,ZodBigInt:xt,ZodBoolean:bt,ZodDate:_t,ZodSymbol:$t,ZodUndefined:vt,ZodNull:wt,ZodAny:et,ZodUnknown:ze,ZodNever:Se,ZodVoid:Zt,ZodArray:qe,ZodObject:de,ZodUnion:kt,ZodDiscriminatedUnion:Gr,ZodIntersection:St,ZodTuple:Ne,ZodRecord:Kr,ZodMap:Gt,ZodSet:Kt,ZodFunction:Yr,ZodLazy:Et,ZodLiteral:At,ZodEnum:Tt,ZodNativeEnum:Ot,ZodPromise:tt,ZodEffects:ye,ZodTransformer:ye,ZodOptional:ke,ZodNullable:We,ZodDefault:Ct,ZodCatch:Yt,ZodNaN:Xt,BRAND:Bo,ZodBranded:Xr,ZodPipeline:ur,custom:ni,Schema:D,ZodSchema:D,late:No,get ZodFirstPartyTypeKind(){return M},coerce:gc,any:Wo,array:Go,bigint:Do,boolean:ai,date:Vo,discriminatedUnion:Jo,effect:Qs,enum:oc,function:sc,instanceof:Po,intersection:Qo,lazy:ic,literal:ac,map:rc,nan:jo,nativeEnum:cc,never:$o,null:qo,nullable:fc,number:ii,object:Ko,oboolean:yc,onumber:mc,optional:uc,ostring:pc,pipeline:hc,preprocess:dc,promise:lc,record:tc,set:nc,strictObject:Yo,string:si,symbol:Fo,transformer:Qs,tuple:ec,undefined:zo,union:Xo,unknown:Ho,void:Zo,NEVER:xc,ZodIssueCode:b,quotelessJson:vo,ZodError:me});var Yn;try{Yn=new TextDecoder}catch{}var T,rt,m=0;var es=[],bc=105,_c=57342,vc=57343,oi=57337;var ci=6,Jt={},It=es,dr=0,W={},Y,hr,pr=0,Lt=0,J,Ae,Q=[],Xn=[],he,ue,fr,li={useRecords:!1,mapsAsObjects:!0},mr=!1,di=2;try{new Function("")}catch{di=1/0}var nt=class t{constructor(e){if(e&&((e.keyMap||e._keyMap)&&!e.useRecords&&(e.useRecords=!1,e.mapsAsObjects=!0),e.useRecords===!1&&e.mapsAsObjects===void 0&&(e.mapsAsObjects=!0),e.getStructures&&(e.getShared=e.getStructures),e.getShared&&!e.structures&&((e.structures=[]).uninitialized=!0),e.keyMap)){this.mapKey=new Map;for(let[r,n]of Object.entries(e.keyMap))this.mapKey.set(n,r)}Object.assign(this,e)}decodeKey(e){return this.keyMap&&this.mapKey.get(e)||e}encodeKey(e){return this.keyMap&&this.keyMap.hasOwnProperty(e)?this.keyMap[e]:e}encodeKeys(e){if(!this._keyMap)return e;let r=new Map;for(let[n,s]of Object.entries(e))r.set(this._keyMap.hasOwnProperty(n)?this._keyMap[n]:n,s);return r}decodeKeys(e){if(!this._keyMap||e.constructor.name!="Map")return e;if(!this._mapKey){this._mapKey=new Map;for(let[n,s]of Object.entries(this._keyMap))this._mapKey.set(s,n)}let r={};return e.forEach((n,s)=>r[we(this._mapKey.has(s)?this._mapKey.get(s):s)]=n),r}mapDecode(e,r){let n=this.decode(e);if(this._keyMap)switch(n.constructor.name){case"Array":return n.map(s=>this.decodeKeys(s))}return n}decode(e,r){if(T)return bi(()=>(en(),this?this.decode(e,r):t.prototype.decode.call(li,e,r)));rt=r>-1?r:e.length,m=0,dr=0,Lt=0,hr=null,It=es,J=null,T=e;try{ue=e.dataView||(e.dataView=new DataView(e.buffer,e.byteOffset,e.byteLength))}catch(n){throw T=null,e instanceof Uint8Array?n:new Error("Source must be a Uint8Array or Buffer but was a "+(e&&typeof e=="object"?e.constructor.name:typeof e))}if(this instanceof t){if(W=this,he=this.sharedValues&&(this.pack?new Array(this.maxPrivatePackedValues||16).concat(this.sharedValues):this.sharedValues),this.structures)return Y=this.structures,Jr();(!Y||Y.length>0)&&(Y=[])}else W=li,(!Y||Y.length>0)&&(Y=[]),he=null;return Jr()}decodeMultiple(e,r){let n,s=0;try{let i=e.length;mr=!0;let a=this?this.decode(e,i):rs.decode(e,i);if(r){if(r(a)===!1)return;for(;m<i;)if(s=m,r(Jr())===!1)return}else{for(n=[a];m<i;)s=m,n.push(Jr());return n}}catch(i){throw i.lastPosition=s,i.values=n,i}finally{mr=!1,en()}}};function Jr(){try{let t=q();if(J){if(m>=J.postBundlePosition){let e=new Error("Unexpected bundle position");throw e.incomplete=!0,e}m=J.postBundlePosition,J=null}if(m==rt)Y=null,T=null,Ae&&(Ae=null);else if(m>rt){let e=new Error("Unexpected end of CBOR data");throw e.incomplete=!0,e}else if(!mr)throw new Error("Data read, but end of buffer not reached");return t}catch(t){throw en(),(t instanceof RangeError||t.message.startsWith("Unexpected end of buffer"))&&(t.incomplete=!0),t}}function q(){let t=T[m++],e=t>>5;if(t=t&31,t>23)switch(t){case 24:t=T[m++];break;case 25:if(e==7)return Tc();t=ue.getUint16(m),m+=2;break;case 26:if(e==7){let r=ue.getFloat32(m);if(W.useFloat32>2){let n=tn[(T[m]&127)<<1|T[m+1]>>7];return m+=4,(n*r+(r>0?.5:-.5)>>0)/n}return m+=4,r}t=ue.getUint32(m),m+=4;break;case 27:if(e==7){let r=ue.getFloat64(m);return m+=8,r}if(e>1){if(ue.getUint32(m)>0)throw new Error("JavaScript does not support arrays, maps, or strings with length over 4294967295");t=ue.getUint32(m+4)}else W.int64AsNumber?(t=ue.getUint32(m)*4294967296,t+=ue.getUint32(m+4)):t=ue.getBigUint64(m);m+=8;break;case 31:switch(e){case 2:case 3:throw new Error("Indefinite length not supported for byte or text strings");case 4:let r=[],n,s=0;for(;(n=q())!=Jt;)r[s++]=n;return e==4?r:e==3?r.join(""):Buffer.concat(r);case 5:let i;if(W.mapsAsObjects){let a={};if(W.keyMap)for(;(i=q())!=Jt;)a[we(W.decodeKey(i))]=q();else for(;(i=q())!=Jt;)a[we(i)]=q();return a}else{fr&&(W.mapsAsObjects=!0,fr=!1);let a=new Map;if(W.keyMap)for(;(i=q())!=Jt;)a.set(W.decodeKey(i),q());else for(;(i=q())!=Jt;)a.set(i,q());return a}case 7:return Jt;default:throw new Error("Invalid major type for indefinite length "+e)}default:throw new Error("Unknown token "+t)}switch(e){case 0:return t;case 1:return~t;case 2:return Ac(t);case 3:if(Lt>=m)return hr.slice(m-pr,(m+=t)-pr);if(Lt==0&&rt<140&&t<32){let s=t<16?yi(t):Ec(t);if(s!=null)return s}return hi(t);case 4:let r=new Array(t);for(let s=0;s<t;s++)r[s]=q();return r;case 5:if(W.mapsAsObjects){let s={};if(W.keyMap)for(let i=0;i<t;i++)s[we(W.decodeKey(q()))]=q();else for(let i=0;i<t;i++)s[we(q())]=q();return s}else{fr&&(W.mapsAsObjects=!0,fr=!1);let s=new Map;if(W.keyMap)for(let i=0;i<t;i++)s.set(W.decodeKey(q()),q());else for(let i=0;i<t;i++)s.set(q(),q());return s}case 6:if(t>=oi){let s=Y[t&8191];if(s)return s.read||(s.read=Jn(s)),s.read();if(t<65536){if(t==vc){let i=er(),a=q(),o=q();Qn(a,o);let l={};if(W.keyMap)for(let c=2;c<i;c++){let f=W.decodeKey(o[c-2]);l[we(f)]=q()}else for(let c=2;c<i;c++){let f=o[c-2];l[we(f)]=q()}return l}else if(t==_c){let i=er(),a=q();for(let o=2;o<i;o++)Qn(a++,q());return q()}else if(t==oi)return Rc();if(W.getShared&&(ts(),s=Y[t&8191],s))return s.read||(s.read=Jn(s)),s.read()}}let n=Q[t];if(n)return n.handlesRead?n(q):n(q());{let s=q();for(let i=0;i<Xn.length;i++){let a=Xn[i](t,s);if(a!==void 0)return a}return new Te(s,t)}case 7:switch(t){case 20:return!1;case 21:return!0;case 22:return null;case 23:return;case 31:default:let s=(he||Ut())[t];if(s!==void 0)return s;throw new Error("Unknown token "+t)}default:if(isNaN(t)){let s=new Error("Unexpected end of CBOR data");throw s.incomplete=!0,s}throw new Error("Unknown CBOR token "+t)}}var ui=/^[a-zA-Z_$][a-zA-Z\d_$]*$/;function Jn(t){function e(){let r=T[m++];if(r=r&31,r>23)switch(r){case 24:r=T[m++];break;case 25:r=ue.getUint16(m),m+=2;break;case 26:r=ue.getUint32(m),m+=4;break;default:throw new Error("Expected array header, but got "+T[m-1])}let n=this.compiledReader;for(;n;){if(n.propertyCount===r)return n(q);n=n.next}if(this.slowReads++>=di){let i=this.length==r?this:this.slice(0,r);return n=W.keyMap?new Function("r","return {"+i.map(a=>W.decodeKey(a)).map(a=>ui.test(a)?we(a)+":r()":"["+JSON.stringify(a)+"]:r()").join(",")+"}"):new Function("r","return {"+i.map(a=>ui.test(a)?we(a)+":r()":"["+JSON.stringify(a)+"]:r()").join(",")+"}"),this.compiledReader&&(n.next=this.compiledReader),n.propertyCount=r,this.compiledReader=n,n(q)}let s={};if(W.keyMap)for(let i=0;i<r;i++)s[we(W.decodeKey(this[i]))]=q();else for(let i=0;i<r;i++)s[we(this[i])]=q();return s}return t.slowReads=0,e}function we(t){return t==="__proto__"?"__proto_":t}var hi=Rt,wc=Rt,kc=Rt,Sc=Rt,pi=!1;function mi(t){pi=!0,hi=e(1),wc=e(2),kc=e(3),Sc=e(5);function e(r){return function(s){let i=It[dr++];if(i==null){if(J)return Rt(s);let o=t(m,rt,s,T);if(typeof o=="string")i=o,It=es;else if(It=o,dr=1,Lt=1,i=It[0],i===void 0)throw new Error("Unexpected end of buffer")}let a=i.length;return a<=s?(m+=s,i):(hr=i,pr=m,Lt=m+a,m+=s,i.slice(0,s))}}}function Rt(t){let e;if(t<16&&(e=yi(t)))return e;if(t>64&&Yn)return Yn.decode(T.subarray(m,m+=t));let r=m+t,n=[];for(e="";m<r;){let s=T[m++];if(!(s&128))n.push(s);else if((s&224)===192){let i=T[m++]&63;n.push((s&31)<<6|i)}else if((s&240)===224){let i=T[m++]&63,a=T[m++]&63;n.push((s&31)<<12|i<<6|a)}else if((s&248)===240){let i=T[m++]&63,a=T[m++]&63,o=T[m++]&63,l=(s&7)<<18|i<<12|a<<6|o;l>65535&&(l-=65536,n.push(l>>>10&1023|55296),l=56320|l&1023),n.push(l)}else n.push(s);n.length>=4096&&(e+=re.apply(String,n),n.length=0)}return n.length>0&&(e+=re.apply(String,n)),e}var re=String.fromCharCode;function Ec(t){let e=m,r=new Array(t);for(let n=0;n<t;n++){let s=T[m++];if((s&128)>0){m=e;return}r[n]=s}return re.apply(String,r)}function yi(t){if(t<4)if(t<2){if(t===0)return"";{let e=T[m++];if((e&128)>1){m-=1;return}return re(e)}}else{let e=T[m++],r=T[m++];if((e&128)>0||(r&128)>0){m-=2;return}if(t<3)return re(e,r);let n=T[m++];if((n&128)>0){m-=3;return}return re(e,r,n)}else{let e=T[m++],r=T[m++],n=T[m++],s=T[m++];if((e&128)>0||(r&128)>0||(n&128)>0||(s&128)>0){m-=4;return}if(t<6){if(t===4)return re(e,r,n,s);{let i=T[m++];if((i&128)>0){m-=5;return}return re(e,r,n,s,i)}}else if(t<8){let i=T[m++],a=T[m++];if((i&128)>0||(a&128)>0){m-=6;return}if(t<7)return re(e,r,n,s,i,a);let o=T[m++];if((o&128)>0){m-=7;return}return re(e,r,n,s,i,a,o)}else{let i=T[m++],a=T[m++],o=T[m++],l=T[m++];if((i&128)>0||(a&128)>0||(o&128)>0||(l&128)>0){m-=8;return}if(t<10){if(t===8)return re(e,r,n,s,i,a,o,l);{let c=T[m++];if((c&128)>0){m-=9;return}return re(e,r,n,s,i,a,o,l,c)}}else if(t<12){let c=T[m++],f=T[m++];if((c&128)>0||(f&128)>0){m-=10;return}if(t<11)return re(e,r,n,s,i,a,o,l,c,f);let d=T[m++];if((d&128)>0){m-=11;return}return re(e,r,n,s,i,a,o,l,c,f,d)}else{let c=T[m++],f=T[m++],d=T[m++],y=T[m++];if((c&128)>0||(f&128)>0||(d&128)>0||(y&128)>0){m-=12;return}if(t<14){if(t===12)return re(e,r,n,s,i,a,o,l,c,f,d,y);{let k=T[m++];if((k&128)>0){m-=13;return}return re(e,r,n,s,i,a,o,l,c,f,d,y,k)}}else{let k=T[m++],w=T[m++];if((k&128)>0||(w&128)>0){m-=14;return}if(t<15)return re(e,r,n,s,i,a,o,l,c,f,d,y,k,w);let _=T[m++];if((_&128)>0){m-=15;return}return re(e,r,n,s,i,a,o,l,c,f,d,y,k,w,_)}}}}}function Ac(t){return W.copyBuffers?Uint8Array.prototype.slice.call(T,m,m+=t):T.subarray(m,m+=t)}var gi=new Float32Array(1),Qr=new Uint8Array(gi.buffer,0,4);function Tc(){let t=T[m++],e=T[m++],r=(t&127)>>2;if(r===31)return e||t&3?NaN:t&128?-1/0:1/0;if(r===0){let n=((t&3)<<8|e)/16777216;return t&128?-n:n}return Qr[3]=t&128|(r>>1)+56,Qr[2]=(t&7)<<5|e>>3,Qr[1]=e<<5,Qr[0]=0,gi[0]}var xf=new Array(4096);var Te=class{constructor(e,r){this.value=e,this.tag=r}};Q[0]=t=>new Date(t);Q[1]=t=>new Date(Math.round(t*1e3));Q[2]=t=>{let e=BigInt(0);for(let r=0,n=t.byteLength;r<n;r++)e=BigInt(t[r])+e<<BigInt(8);return e};Q[3]=t=>BigInt(-1)-Q[2](t);Q[4]=t=>+(t[1]+"e"+t[0]);Q[5]=t=>t[1]*Math.exp(t[0]*Math.log(2));var Qn=(t,e)=>{t=t-57344;let r=Y[t];r&&r.isShared&&((Y.restoreStructures||(Y.restoreStructures=[]))[t]=r),Y[t]=e,e.read=Jn(e)};Q[bc]=t=>{let e=t.length,r=t[1];Qn(t[0],r);let n={};for(let s=2;s<e;s++){let i=r[s-2];n[we(i)]=t[s]}return n};Q[14]=t=>J?J[0].slice(J.position0,J.position0+=t):new Te(t,14);Q[15]=t=>J?J[1].slice(J.position1,J.position1+=t):new Te(t,15);var Oc={Error,RegExp};Q[27]=t=>(Oc[t[0]]||Error)(t[1],t[2]);var xi=t=>{if(T[m++]!=132)throw new Error("Packed values structure must be followed by a 4 element array");let e=t();return he=he?e.concat(he.slice(e.length)):e,he.prefixes=t(),he.suffixes=t(),t()};xi.handlesRead=!0;Q[51]=xi;Q[ci]=t=>{if(!he)if(W.getShared)ts();else return new Te(t,ci);if(typeof t=="number")return he[16+(t>=0?2*t:-2*t-1)];throw new Error("No support for non-integer packed references yet")};Q[28]=t=>{Ae||(Ae=new Map,Ae.id=0);let e=Ae.id++,r=T[m],n;r>>5==4?n=[]:n={};let s={target:n};Ae.set(e,s);let i=t();return s.used?Object.assign(n,i):(s.target=i,i)};Q[28].handlesRead=!0;Q[29]=t=>{let e=Ae.get(t);return e.used=!0,e.target};Q[258]=t=>new Set(t);(Q[259]=t=>(W.mapsAsObjects&&(W.mapsAsObjects=!1,fr=!0),t())).handlesRead=!0;function Qt(t,e){return typeof t=="string"?t+e:t instanceof Array?t.concat(e):Object.assign({},t,e)}function Ut(){if(!he)if(W.getShared)ts();else throw new Error("No packed values available");return he}var Cc=1399353956;Xn.push((t,e)=>{if(t>=225&&t<=255)return Qt(Ut().prefixes[t-224],e);if(t>=28704&&t<=32767)return Qt(Ut().prefixes[t-28672],e);if(t>=1879052288&&t<=2147483647)return Qt(Ut().prefixes[t-1879048192],e);if(t>=216&&t<=223)return Qt(e,Ut().suffixes[t-216]);if(t>=27647&&t<=28671)return Qt(e,Ut().suffixes[t-27639]);if(t>=1811940352&&t<=1879048191)return Qt(e,Ut().suffixes[t-1811939328]);if(t==Cc)return{packedValues:he,structures:Y.slice(0),version:e};if(t==55799)return e});var Uc=new Uint8Array(new Uint16Array([1]).buffer)[0]==1,fi=[Uint8Array,Uint8ClampedArray,Uint16Array,Uint32Array,typeof BigUint64Array>"u"?{name:"BigUint64Array"}:BigUint64Array,Int8Array,Int16Array,Int32Array,typeof BigInt64Array>"u"?{name:"BigInt64Array"}:BigInt64Array,Float32Array,Float64Array],Ic=[64,68,69,70,71,72,77,78,79,85,86];for(let t=0;t<fi.length;t++)Lc(fi[t],Ic[t]);function Lc(t,e){let r="get"+t.name.slice(0,-5),n;typeof t=="function"?n=t.BYTES_PER_ELEMENT:t=null;for(let s=0;s<2;s++){if(!s&&n==1)continue;let i=n==2?1:n==4?2:3;Q[s?e:e-4]=n==1||s==Uc?a=>{if(!t)throw new Error("Could not find typed array for code "+e);return new t(Uint8Array.prototype.slice.call(a,0).buffer)}:a=>{if(!t)throw new Error("Could not find typed array for code "+e);let o=new DataView(a.buffer,a.byteOffset,a.byteLength),l=a.length>>i,c=new t(l),f=o[r];for(let d=0;d<l;d++)c[d]=f.call(o,d<<i,s);return c}}}function Rc(){let t=er(),e=m+q();for(let n=2;n<t;n++){let s=er();m+=s}let r=m;return m=e,J=[Rt(er()),Rt(er())],J.position0=0,J.position1=0,J.postBundlePosition=m,m=r,q()}function er(){let t=T[m++]&31;if(t>23)switch(t){case 24:t=T[m++];break;case 25:t=ue.getUint16(m),m+=2;break;case 26:t=ue.getUint32(m),m+=4;break}return t}function ts(){if(W.getShared){let t=bi(()=>(T=null,W.getShared()))||{},e=t.structures||[];W.sharedVersion=t.version,he=W.sharedValues=t.packedValues,Y===!0?W.structures=Y=e:Y.splice.apply(Y,[0,e.length].concat(e))}}function bi(t){let e=rt,r=m,n=dr,s=pr,i=Lt,a=hr,o=It,l=Ae,c=J,f=new Uint8Array(T.slice(0,rt)),d=Y,y=W,k=mr,w=t();return rt=e,m=r,dr=n,pr=s,Lt=i,hr=a,It=o,Ae=l,J=c,T=f,mr=k,Y=d,W=y,ue=new DataView(T.buffer,T.byteOffset,T.byteLength),w}function en(){T=null,Ae=null,Y=null}var tn=new Array(147);for(let t=0;t<256;t++)tn[t]=+("1e"+Math.floor(45.15-t*.30103));var rs=new nt({useRecords:!1}),yr=rs.decode,Mc=rs.decodeMultiple,rn={NEVER:0,ALWAYS:1,DECIMAL_ROUND:3,DECIMAL_FIT:4};var nn;try{nn=new TextEncoder}catch{}var os,Ai,on=typeof globalThis=="object"&&globalThis.Buffer,gr=typeof on<"u",ns=gr?on.allocUnsafeSlow:Uint8Array,_i=gr?on:Uint8Array,vi=256,wi=gr?4294967296:2144337920;var ss,h,G,u=0,st,ee=null,Bc=61440,Nc=/[\u0080-\uFFFF]/,ge=Symbol("record-id"),tr=class extends nt{constructor(e){super(e),this.offset=0;let r,n,s,i,a,o;e=e||{};let l=_i.prototype.utf8Write?function(p,E,g){return h.utf8Write(p,E,g)}:nn&&nn.encodeInto?function(p,E){return nn.encodeInto(p,h.subarray(E)).written}:!1,c=this,f=e.structures||e.saveStructures,d=e.maxSharedStructures;if(d==null&&(d=f?128:0),d>8190)throw new Error("Maximum maxSharedStructure is 8190");let y=e.sequential;y&&(d=0),this.structures||(this.structures=[]),this.saveStructures&&(this.saveShared=this.saveStructures);let k,w,_=e.sharedValues,C;if(_){C=Object.create(null);for(let p=0,E=_.length;p<E;p++)C[_[p]]=p}let H=[],B=0,L=0;this.mapEncode=function(p,E){if(this._keyMap&&!this._mapped)switch(p.constructor.name){case"Array":p=p.map(g=>this.encodeKeys(g));break}return this.encode(p,E)},this.encode=function(p,E){if(h||(h=new ns(8192),G=new DataView(h.buffer,0,8192),u=0),st=h.length-10,st-u<2048?(h=new ns(h.length),G=new DataView(h.buffer,0,h.length),st=h.length-10,u=0):E===cs&&(u=u+7&2147483640),n=u,c.useSelfDescribedHeader&&(G.setUint32(u,3654940416),u+=3),o=c.structuredClone?new Map:null,c.bundleStrings&&typeof p!="string"?(ee=[],ee.size=1/0):ee=null,s=c.structures,s){if(s.uninitialized){let v=c.getShared()||{};c.structures=s=v.structures||[],c.sharedVersion=v.version;let x=c.sharedValues=v.packedValues;if(x){C={};for(let I=0,P=x.length;I<P;I++)C[x[I]]=I}}let g=s.length;if(g>d&&!y&&(g=d),!s.transitions){s.transitions=Object.create(null);for(let v=0;v<g;v++){let x=s[v];if(!x)continue;let I,P=s.transitions;for(let F=0,z=x.length;F<z;F++){P[ge]===void 0&&(P[ge]=v);let $=x[F];I=P[$],I||(I=P[$]=Object.create(null)),P=I}P[ge]=v|1048576}}y||(s.nextId=g)}if(i&&(i=!1),a=s||[],w=C,e.pack){let g=new Map;if(g.values=[],g.encoder=c,g.maxValues=e.maxPrivatePackedValues||(C?16:1/0),g.objectMap=C||!1,g.samplingPackedValues=k,sn(p,g),g.values.length>0){h[u++]=216,h[u++]=51,je(4);let v=g.values;U(v),je(0),je(0),w=Object.create(C||null);for(let x=0,I=v.length;x<I;x++)w[v[x]]=x}}ss=E&as;try{if(ss)return;if(U(p),ee&&Ei(n,U),c.offset=u,o&&o.idsToInsert){u+=o.idsToInsert.length*2,u>st&&pe(u),c.offset=u;let g=Dc(h.subarray(n,u),o.idsToInsert);return o=null,g}return E&cs?(h.start=n,h.end=u,h):h.subarray(n,u)}finally{if(s){if(L<10&&L++,s.length>d&&(s.length=d),B>1e4)s.transitions=null,L=0,B=0,H.length>0&&(H=[]);else if(H.length>0&&!y){for(let g=0,v=H.length;g<v;g++)H[g][ge]=void 0;H=[]}}if(i&&c.saveShared){c.structures.length>d&&(c.structures=c.structures.slice(0,d));let g=h.subarray(n,u);return c.updateSharedData()===!1?c.encode(p):g}E&$c&&(u=n)}},this.findCommonStringsToPack=()=>(k=new Map,C||(C=Object.create(null)),p=>{let E=p&&p.threshold||4,g=this.pack?p.maxPrivatePackedValues||16:0;_||(_=this.sharedValues=[]);for(let[v,x]of k)x.count>E&&(C[v]=g++,_.push(v),i=!0);for(;this.saveShared&&this.updateSharedData()===!1;);k=null});let U=p=>{u>st&&(h=pe(u));var E=typeof p,g;if(E==="string"){if(w){let P=w[p];if(P>=0){P<16?h[u++]=P+224:(h[u++]=198,P&1?U(15-P>>1):U(P-16>>1));return}else if(k&&!e.pack){let F=k.get(p);F?F.count++:k.set(p,{count:1})}}let v=p.length;if(ee&&v>=4&&v<1024){if((ee.size+=v)>Bc){let F,z=(ee[0]?ee[0].length*3+ee[1].length:0)+10;u+z>st&&(h=pe(u+z)),h[u++]=217,h[u++]=223,h[u++]=249,h[u++]=ee.position?132:130,h[u++]=26,F=u-n,u+=4,ee.position&&Ei(n,U),ee=["",""],ee.size=0,ee.position=F}let P=Nc.test(p);ee[P?0:1]+=p,h[u++]=P?206:207,U(v);return}let x;v<32?x=1:v<256?x=2:v<65536?x=3:x=5;let I=v*3;if(u+I>st&&(h=pe(u+I)),v<64||!l){let P,F,z,$=u+x;for(P=0;P<v;P++)F=p.charCodeAt(P),F<128?h[$++]=F:F<2048?(h[$++]=F>>6|192,h[$++]=F&63|128):(F&64512)===55296&&((z=p.charCodeAt(P+1))&64512)===56320?(F=65536+((F&1023)<<10)+(z&1023),P++,h[$++]=F>>18|240,h[$++]=F>>12&63|128,h[$++]=F>>6&63|128,h[$++]=F&63|128):(h[$++]=F>>12|224,h[$++]=F>>6&63|128,h[$++]=F&63|128);g=$-u-x}else g=l(p,u+x,I);g<24?h[u++]=96|g:g<256?(x<2&&h.copyWithin(u+2,u+1,u+1+g),h[u++]=120,h[u++]=g):g<65536?(x<3&&h.copyWithin(u+3,u+2,u+2+g),h[u++]=121,h[u++]=g>>8,h[u++]=g&255):(x<5&&h.copyWithin(u+5,u+3,u+3+g),h[u++]=122,G.setUint32(u,g),u+=4),u+=g}else if(E==="number")if(!this.alwaysUseFloat&&p>>>0===p)p<24?h[u++]=p:p<256?(h[u++]=24,h[u++]=p):p<65536?(h[u++]=25,h[u++]=p>>8,h[u++]=p&255):(h[u++]=26,G.setUint32(u,p),u+=4);else if(!this.alwaysUseFloat&&p>>0===p)p>=-24?h[u++]=31-p:p>=-256?(h[u++]=56,h[u++]=~p):p>=-65536?(h[u++]=57,G.setUint16(u,~p),u+=2):(h[u++]=58,G.setUint32(u,~p),u+=4);else{let v;if((v=this.useFloat32)>0&&p<4294967296&&p>=-2147483648){h[u++]=250,G.setFloat32(u,p);let x;if(v<4||(x=p*tn[(h[u]&127)<<1|h[u+1]>>7])>>0===x){u+=4;return}else u--}h[u++]=251,G.setFloat64(u,p),u+=8}else if(E==="object")if(!p)h[u++]=246;else{if(o){let x=o.get(p);if(x){if(h[u++]=216,h[u++]=29,h[u++]=25,!x.references){let I=o.idsToInsert||(o.idsToInsert=[]);x.references=[],I.push(x)}x.references.push(u-n),u+=2;return}else o.set(p,{offset:u-n})}let v=p.constructor;if(v===Object)ce(p,!0);else if(v===Array){g=p.length,g<24?h[u++]=128|g:je(g);for(let x=0;x<g;x++)U(p[x])}else if(v===Map)if((this.mapsAsObjects?this.useTag259ForMaps!==!1:this.useTag259ForMaps)&&(h[u++]=217,h[u++]=1,h[u++]=3),g=p.size,g<24?h[u++]=160|g:g<256?(h[u++]=184,h[u++]=g):g<65536?(h[u++]=185,h[u++]=g>>8,h[u++]=g&255):(h[u++]=186,G.setUint32(u,g),u+=4),c.keyMap)for(let[x,I]of p)U(c.encodeKey(x)),U(I);else for(let[x,I]of p)U(x),U(I);else{for(let x=0,I=os.length;x<I;x++){let P=Ai[x];if(p instanceof P){let F=os[x],z=F.tag;z==null&&(z=F.getTag&&F.getTag.call(this,p)),z<24?h[u++]=192|z:z<256?(h[u++]=216,h[u++]=z):z<65536?(h[u++]=217,h[u++]=z>>8,h[u++]=z&255):z>-1&&(h[u++]=218,G.setUint32(u,z),u+=4),F.encode.call(this,p,U,pe);return}}if(p[Symbol.iterator]){if(ss){let x=new Error("Iterable should be serialized as iterator");throw x.iteratorNotHandled=!0,x}h[u++]=159;for(let x of p)U(x);h[u++]=255;return}if(p[Symbol.asyncIterator]||is(p)){let x=new Error("Iterable/blob should be serialized as iterator");throw x.iteratorNotHandled=!0,x}ce(p,!p.hasOwnProperty)}}else if(E==="boolean")h[u++]=p?245:244;else if(E==="bigint"){if(p<BigInt(1)<<BigInt(64)&&p>=0)h[u++]=27,G.setBigUint64(u,p);else if(p>-(BigInt(1)<<BigInt(64))&&p<0)h[u++]=59,G.setBigUint64(u,-p-BigInt(1));else if(this.largeBigIntToFloat)h[u++]=251,G.setFloat64(u,Number(p));else throw new RangeError(p+" was too large to fit in CBOR 64-bit integer format, set largeBigIntToFloat to convert to float-64");u+=8}else if(E==="undefined")h[u++]=247;else throw new Error("Unknown type: "+E)},ce=this.useRecords===!1?this.variableMapSize?p=>{let E=Object.keys(p),g=Object.values(p),v=E.length;v<24?h[u++]=160|v:v<256?(h[u++]=184,h[u++]=v):v<65536?(h[u++]=185,h[u++]=v>>8,h[u++]=v&255):(h[u++]=186,G.setUint32(u,v),u+=4);let x;if(c.keyMap)for(let I=0;I<v;I++)U(encodeKey(E[I])),U(g[I]);else for(let I=0;I<v;I++)U(E[I]),U(g[I])}:(p,E)=>{h[u++]=185;let g=u-n;u+=2;let v=0;if(c.keyMap)for(let x in p)(E||p.hasOwnProperty(x))&&(U(c.encodeKey(x)),U(p[x]),v++);else for(let x in p)(E||p.hasOwnProperty(x))&&(U(x),U(p[x]),v++);h[g+++n]=v>>8,h[g+n]=v&255}:(p,E)=>{let g,v=a.transitions||(a.transitions=Object.create(null)),x=0,I=0,P,F;if(this.keyMap){F=Object.keys(p).map($=>this.encodeKey($)),I=F.length;for(let $=0;$<I;$++){let $s=F[$];g=v[$s],g||(g=v[$s]=Object.create(null),x++),v=g}}else for(let $ in p)(E||p.hasOwnProperty($))&&(g=v[$],g||(v[ge]&1048576&&(P=v[ge]&65535),g=v[$]=Object.create(null),x++),v=g,I++);let z=v[ge];if(z!==void 0)z&=65535,h[u++]=217,h[u++]=z>>8|224,h[u++]=z&255;else if(F||(F=v.__keys__||(v.__keys__=Object.keys(p))),P===void 0?(z=a.nextId++,z||(z=0,a.nextId=1),z>=vi&&(a.nextId=(z=d)+1)):z=P,a[z]=F,z<d){h[u++]=217,h[u++]=z>>8|224,h[u++]=z&255,v=a.transitions;for(let $=0;$<I;$++)(v[ge]===void 0||v[ge]&1048576)&&(v[ge]=z),v=v[F[$]];v[ge]=z|1048576,i=!0}else{if(v[ge]=z,G.setUint32(u,3655335680),u+=3,x&&(B+=L*x),H.length>=vi-d&&(H.shift()[ge]=void 0),H.push(v),je(I+2),U(57344+z),U(F),E===null)return;for(let $ in p)(E||p.hasOwnProperty($))&&U(p[$]);return}if(I<24?h[u++]=128|I:je(I),E!==null)for(let $ in p)(E||p.hasOwnProperty($))&&U(p[$])},pe=p=>{let E;if(p>16777216){if(p-n>wi)throw new Error("Encoded buffer would be larger than maximum buffer size");E=Math.min(wi,Math.round(Math.max((p-n)*(p>67108864?1.25:2),4194304)/4096)*4096)}else E=(Math.max(p-n<<2,h.length-1)>>12)+1<<12;let g=new ns(E);return G=new DataView(g.buffer,0,E),h.copy?h.copy(g,0,n,p):g.set(h.slice(n,p)),u-=n,n=0,st=g.length-10,h=g},fe=100,ie=1e3;this.encodeAsIterable=function(p,E){return mt(p,E,te)},this.encodeAsAsyncIterable=function(p,E){return mt(p,E,Ft)};function*te(p,E,g){let v=p.constructor;if(v===Object){let x=c.useRecords!==!1;x?ce(p,null):ki(Object.keys(p).length,160);for(let I in p){let P=p[I];x||U(I),P&&typeof P=="object"?E[I]?yield*te(P,E[I]):yield*Ye(P,E,I):U(P)}}else if(v===Array){let x=p.length;je(x);for(let I=0;I<x;I++){let P=p[I];P&&(typeof P=="object"||u-n>fe)?E.element?yield*te(P,E.element):yield*Ye(P,E,"element"):U(P)}}else if(p[Symbol.iterator]){h[u++]=159;for(let x of p)x&&(typeof x=="object"||u-n>fe)?E.element?yield*te(x,E.element):yield*Ye(x,E,"element"):U(x);h[u++]=255}else is(p)?(ki(p.size,64),yield h.subarray(n,u),yield p,Ve()):p[Symbol.asyncIterator]?(h[u++]=159,yield h.subarray(n,u),yield p,Ve(),h[u++]=255):U(p);g&&u>n?yield h.subarray(n,u):u-n>fe&&(yield h.subarray(n,u),Ve())}function*Ye(p,E,g){let v=u-n;try{U(p),u-n>fe&&(yield h.subarray(n,u),Ve())}catch(x){if(x.iteratorNotHandled)E[g]={},u=n+v,yield*te.call(this,p,E[g]);else throw x}}function Ve(){fe=ie,c.encode(null,as)}function mt(p,E,g){return E&&E.chunkThreshold?fe=ie=E.chunkThreshold:fe=100,p&&typeof p=="object"?(c.encode(null,as),g(p,c.iterateProperties||(c.iterateProperties={}),!0)):[c.encode(p)]}async function*Ft(p,E){for(let g of te(p,E,!0)){let v=g.constructor;if(v===_i||v===Uint8Array)yield g;else if(is(g)){let x=g.stream().getReader(),I;for(;!(I=await x.read()).done;)yield I.value}else if(g[Symbol.asyncIterator])for await(let x of g)Ve(),x?yield*Ft(x,E.async||(E.async={})):yield c.encode(x);else yield g}}}useBuffer(e){h=e,G=new DataView(h.buffer,h.byteOffset,h.byteLength),u=0}clearSharedData(){this.structures&&(this.structures=[]),this.sharedValues&&(this.sharedValues=void 0)}updateSharedData(){let e=this.sharedVersion||0;this.sharedVersion=e+1;let r=this.structures.slice(0),n=new an(r,this.sharedValues,this.sharedVersion),s=this.saveShared(n,i=>(i&&i.version||0)==e);return s===!1?(n=this.getShared()||{},this.structures=n.structures||[],this.sharedValues=n.packedValues,this.sharedVersion=n.version,this.structures.nextId=this.structures.length):r.forEach((i,a)=>this.structures[a]=i),s}};function ki(t,e){t<24?h[u++]=e|t:t<256?(h[u++]=e|24,h[u++]=t):t<65536?(h[u++]=e|25,h[u++]=t>>8,h[u++]=t&255):(h[u++]=e|26,G.setUint32(u,t),u+=4)}var an=class{constructor(e,r,n){this.structures=e,this.packedValues=r,this.version=n}};function je(t){t<24?h[u++]=128|t:t<256?(h[u++]=152,h[u++]=t):t<65536?(h[u++]=153,h[u++]=t>>8,h[u++]=t&255):(h[u++]=154,G.setUint32(u,t),u+=4)}var Pc=typeof Blob>"u"?function(){}:Blob;function is(t){if(t instanceof Pc)return!0;let e=t[Symbol.toStringTag];return e==="Blob"||e==="File"}function sn(t,e){switch(typeof t){case"string":if(t.length>3){if(e.objectMap[t]>-1||e.values.length>=e.maxValues)return;let n=e.get(t);if(n)++n.count==2&&e.values.push(t);else if(e.set(t,{count:1}),e.samplingPackedValues){let s=e.samplingPackedValues.get(t);s?s.count++:e.samplingPackedValues.set(t,{count:1})}}break;case"object":if(t)if(t instanceof Array)for(let n=0,s=t.length;n<s;n++)sn(t[n],e);else{let n=!e.encoder.useRecords;for(var r in t)t.hasOwnProperty(r)&&(n&&sn(r,e),sn(t[r],e))}break;case"function":console.log(t)}}var jc=new Uint8Array(new Uint16Array([1]).buffer)[0]==1;Ai=[Date,Set,Error,RegExp,Te,ArrayBuffer,Uint8Array,Uint8ClampedArray,Uint16Array,Uint32Array,typeof BigUint64Array>"u"?function(){}:BigUint64Array,Int8Array,Int16Array,Int32Array,typeof BigInt64Array>"u"?function(){}:BigInt64Array,Float32Array,Float64Array,an];os=[{tag:1,encode(t,e){let r=t.getTime()/1e3;(this.useTimestamp32||t.getMilliseconds()===0)&&r>=0&&r<4294967296?(h[u++]=26,G.setUint32(u,r),u+=4):(h[u++]=251,G.setFloat64(u,r),u+=8)}},{tag:258,encode(t,e){let r=Array.from(t);e(r)}},{tag:27,encode(t,e){e([t.name,t.message])}},{tag:27,encode(t,e){e(["RegExp",t.source,t.flags])}},{getTag(t){return t.tag},encode(t,e){e(t.value)}},{encode(t,e,r){Si(t,r)}},{getTag(t){if(t.constructor===Uint8Array&&(this.tagUint8Array||gr&&this.tagUint8Array!==!1))return 64},encode(t,e,r){Si(t,r)}},Pe(68,1),Pe(69,2),Pe(70,4),Pe(71,8),Pe(72,1),Pe(77,2),Pe(78,4),Pe(79,8),Pe(85,4),Pe(86,8),{encode(t,e){let r=t.packedValues||[],n=t.structures||[];if(r.values.length>0){h[u++]=216,h[u++]=51,je(4);let s=r.values;e(s),je(0),je(0),packedObjectMap=Object.create(sharedPackedObjectMap||null);for(let i=0,a=s.length;i<a;i++)packedObjectMap[s[i]]=i}if(n){G.setUint32(u,3655335424),u+=3;let s=n.slice(0);s.unshift(57344),s.push(new Te(t.version,1399353956)),e(s)}else e(new Te(t.version,1399353956))}}];function Pe(t,e){return!jc&&e>1&&(t-=4),{tag:t,encode:function(n,s){let i=n.byteLength,a=n.byteOffset||0,o=n.buffer||n;s(gr?on.from(o,a,i):new Uint8Array(o,a,i))}}}function Si(t,e){let r=t.byteLength;r<24?h[u++]=64+r:r<256?(h[u++]=88,h[u++]=r):r<65536?(h[u++]=89,h[u++]=r>>8,h[u++]=r&255):(h[u++]=90,G.setUint32(u,r),u+=4),u+r>=h.length&&e(u+r),h.set(t.buffer?t:new Uint8Array(t),u),u+=r}function Dc(t,e){let r,n=e.length*2,s=t.length-n;e.sort((i,a)=>i.offset>a.offset?1:-1);for(let i=0;i<e.length;i++){let a=e[i];a.id=i;for(let o of a.references)t[o++]=i>>8,t[o]=i&255}for(;r=e.pop();){let i=r.offset;t.copyWithin(i+n,i,s),n-=2;let a=i+n;t[a++]=216,t[a++]=28,s=i}return t}function Ei(t,e){G.setUint32(ee.position+t,u-ee.position-t+1);let r=ee;ee=null,e(r[0]),e(r[1])}var ls=new tr({useRecords:!1}),cn=ls.encode,Vc=ls.encodeAsIterable,Fc=ls.encodeAsAsyncIterable,{NEVER:zc,ALWAYS:qc,DECIMAL_ROUND:Wc,DECIMAL_FIT:Hc}=rn,cs=512,$c=1024,as=2048;var Wi=require("module"),Qc={};var Jc=process.env.CBOR_NATIVE_ACCELERATION_DISABLED!==void 0&&process.env.CBOR_NATIVE_ACCELERATION_DISABLED.toLowerCase()==="true";if(!Jc){let t;try{typeof require=="function"?t=qi():t=(0,Wi.createRequire)(Qc.url)("cbor-extract"),t&&mi(t.extractStrings)}catch{}}var el=Ee.object({type:Ee.literal("challenge"),challenge:Ee.instanceof(Uint8Array)}),tl=Ee.object({type:Ee.literal("validation"),message:Ee.string()}),rl=Ee.object({type:Ee.literal("challenge-response"),signature:Ee.instanceof(Uint8Array)}),fn=class extends _e{verifier=Ee.discriminatedUnion("type",[el,tl,rl]);async sendData(e,r){e.send(cn(await this.verifier.parseAsync(r)))}async decodeData(e){return this.verifier.parseAsync(yr(e))}};var ps=2n**256n,it=ps-0x1000003d1n,xe=ps-0x14551231950b75fc4402da1732fc9bebfn,Yi=0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798n,Xi=0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8n,Ji={p:it,n:xe,a:0n,b:7n,Gx:Yi,Gy:Xi},Ce=32,Hi=t=>O(O(t*t)*t+Ji.b),K=(t="")=>{throw new Error(t)},gn=t=>typeof t=="bigint",Qi=t=>typeof t=="string",hs=t=>gn(t)&&0n<t&&t<it,pn=t=>gn(t)&&0n<t&&t<xe,ea=(t,e)=>!(t instanceof Uint8Array)||typeof e=="number"&&e>0&&t.length!==e?K("Uint8Array expected"):t,br=t=>new Uint8Array(t),Nt=(t,e)=>ea(Qi(t)?_r(t):br(t),e),O=(t,e=it)=>{let r=t%e;return r>=0n?r:e+r},$i=t=>t instanceof Ue?t:K("Point expected"),Zi,Ue=class t{constructor(e,r,n){this.px=e,this.py=r,this.pz=n}static fromAffine(e){return new t(e.x,e.y,1n)}static fromHex(e){e=Nt(e);let r,n=e[0],s=e.subarray(1),i=mn(s,0,Ce),a=e.length;if(a===33&&[2,3].includes(n)){hs(i)||K("Point hex invalid: x not FE");let o=nl(Hi(i)),l=(o&1n)===1n;(n&1)===1!==l&&(o=O(-o)),r=new t(i,o,1n)}return a===65&&n===4&&(r=new t(i,mn(s,Ce,2*Ce),1n)),r?r.ok():K("Point is not on curve")}static fromPrivateKey(e){return Bt.mul(sl(e))}get x(){return this.aff().x}get y(){return this.aff().y}equals(e){let{px:r,py:n,pz:s}=this,{px:i,py:a,pz:o}=$i(e),l=O(r*o),c=O(i*s),f=O(n*o),d=O(a*s);return l===c&&f===d}negate(){return new t(this.px,O(-this.py),this.pz)}double(){return this.add(this)}add(e){let{px:r,py:n,pz:s}=this,{px:i,py:a,pz:o}=$i(e),{a:l,b:c}=Ji,f=0n,d=0n,y=0n,k=O(c*3n),w=O(r*i),_=O(n*a),C=O(s*o),H=O(r+n),B=O(i+a);H=O(H*B),B=O(w+_),H=O(H-B),B=O(r+s);let L=O(i+o);return B=O(B*L),L=O(w+C),B=O(B-L),L=O(n+s),f=O(a+o),L=O(L*f),f=O(_+C),L=O(L-f),y=O(l*B),f=O(k*C),y=O(f+y),f=O(_-y),y=O(_+y),d=O(f*y),_=O(w+w),_=O(_+w),C=O(l*C),B=O(k*B),_=O(_+C),C=O(w-C),C=O(l*C),B=O(B+C),w=O(_*B),d=O(d+w),w=O(L*B),f=O(H*f),f=O(f-w),w=O(H*_),y=O(L*y),y=O(y+w),new t(f,d,y)}mul(e,r=!0){if(!r&&e===0n)return dn;if(pn(e)||K("invalid scalar"),this.equals(Bt))return ll(e).p;let n=dn,s=Bt;for(let i=this;e>0n;i=i.double(),e>>=1n)e&1n?n=n.add(i):r&&(s=s.add(i));return n}mulAddQUns(e,r,n){return this.mul(r,!1).add(e.mul(n,!1)).ok()}toAffine(){let{px:e,py:r,pz:n}=this;if(this.equals(dn))return{x:0n,y:0n};if(n===1n)return{x:e,y:r};let s=xn(n);return O(n*s)!==1n&&K("invalid inverse"),{x:O(e*s),y:O(r*s)}}assertValidity(){let{x:e,y:r}=this.aff();return(!hs(e)||!hs(r))&&K("Point invalid: x or y"),O(r*r)===Hi(e)?this:K("Point invalid: not on curve")}multiply(e){return this.mul(e)}aff(){return this.toAffine()}ok(){return this.assertValidity()}toHex(e=!0){let{x:r,y:n}=this.aff();return(e?(n&1n)===0n?"02":"03":"04")+xr(r)+(e?"":xr(n))}toRawBytes(e=!0){return _r(this.toHex(e))}};Ue.BASE=new Ue(Yi,Xi,1n);Ue.ZERO=new Ue(0n,1n,0n);var{BASE:Bt,ZERO:dn}=Ue,ta=(t,e)=>t.toString(16).padStart(e,"0"),ms=t=>Array.from(t).map(e=>ta(e,2)).join(""),_r=t=>{let e=t.length;(!Qi(t)||e%2)&&K("hex invalid 1");let r=br(e/2);for(let n=0;n<r.length;n++){let s=n*2,i=t.slice(s,s+2),a=Number.parseInt(i,16);(Number.isNaN(a)||a<0)&&K("hex invalid 2"),r[n]=a}return r},vr=t=>BigInt("0x"+(ms(t)||"0")),mn=(t,e,r)=>vr(t.slice(e,r)),ys=t=>gn(t)&&t>=0n&&t<ps?_r(ta(t,2*Ce)):K("bigint expected"),xr=t=>ms(ys(t)),Gi=(...t)=>{let e=br(t.reduce((n,s)=>n+ea(s).length,0)),r=0;return t.forEach(n=>{e.set(n,r),r+=n.length}),e},xn=(t,e=it)=>{(t===0n||e<=0n)&&K("no inverse n="+t+" mod="+e);let r=O(t,e),n=e,s=0n,i=1n,a=1n,o=0n;for(;r!==0n;){let l=n/r,c=n%r,f=s-a*l,d=i-o*l;n=r,r=c,s=a,i=o,a=f,o=d}return n===1n?O(s,e):K("no inverse")},nl=t=>{let e=1n;for(let r=t,n=(it+1n)/4n;n>0n;n>>=1n)n&1n&&(e=e*r%it),r=r*r%it;return O(e*e)===t?e:K("sqrt invalid")},sl=t=>(gn(t)||(t=vr(Nt(t,Ce))),pn(t)?t:K("private key out of range")),ra=t=>t>xe>>1n;var yn=class t{constructor(e,r,n){this.r=e,this.s=r,this.recovery=n,this.assertValidity()}static fromCompact(e){return e=Nt(e,64),new t(mn(e,0,Ce),mn(e,Ce,2*Ce))}assertValidity(){return pn(this.r)&&pn(this.s)?this:K()}addRecoveryBit(e){return new t(this.r,this.s,e)}hasHighS(){return ra(this.s)}recoverPublicKey(e){let{r,s:n,recovery:s}=this;[0,1,2,3].includes(s)||K("recovery id invalid");let i=na(Nt(e,32)),a=s===2||s===3?r+xe:r;a>=it&&K("q.x invalid");let o=s&1?"03":"02",l=Ue.fromHex(o+xr(a)),c=xn(a,xe),f=O(-i*c,xe),d=O(n*c,xe);return Bt.mulAddQUns(l,f,d)}toCompactRawBytes(){return _r(this.toCompactHex())}toCompactHex(){return xr(this.r)+xr(this.s)}},il=t=>{let e=t.length*8-256,r=vr(t);return e>0?r>>BigInt(e):r},na=t=>O(il(t),xe);var Ki=()=>typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0,hn;var al={lowS:!0};function sa(t,e,r,n=al){let{lowS:s}=n;s==null&&(s=!0),"strict"in n&&K("verify() legacy options not supported");let i,a,o,l=t&&typeof t=="object"&&"r"in t;!l&&Nt(t).length!==2*Ce&&K("signature must be 64 bytes");try{i=l?new yn(t.r,t.s).assertValidity():yn.fromCompact(t),a=na(Nt(e,Ce)),o=r instanceof Ue?r.ok():Ue.fromHex(r)}catch{return!1}if(!i)return!1;let{r:c,s:f}=i;if(s&&ra(f))return!1;let d;try{let k=xn(f,xe),w=O(a*k,xe),_=O(c*k,xe);d=Bt.mulAddQUns(o,w,_).aff()}catch{return!1}return d?O(d.x,xe)===c:!1}function ol(t){t=Nt(t);let e=Ce+8;(t.length<e||t.length>1024)&&K("expected proper params");let r=O(vr(t),xe-1n)+1n;return ys(r)}var gs={hexToBytes:_r,bytesToHex:ms,concatBytes:Gi,bytesToNumberBE:vr,numberToBytesBE:ys,mod:O,invert:xn,hmacSha256Async:async(t,...e)=>{let r=Ki();if(!r)return K("etc.hmacSha256Async not set");let n=r.subtle,s=await n.importKey("raw",t,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]);return br(await n.sign("HMAC",s,Gi(...e)))},hmacSha256Sync:hn,hashToPrivateKey:ol,randomBytes:t=>{let e=Ki();return e||K("crypto.getRandomValues must be defined"),e.getRandomValues(br(t))}};Object.defineProperties(gs,{hmacSha256Sync:{configurable:!1,get(){return hn},set(t){hn||(hn=t)}}});var Mt=8,cl=()=>{let t=[],e=256/Mt+1,r=Bt,n=r;for(let s=0;s<e;s++){n=r,t.push(n);for(let i=1;i<2**(Mt-1);i++)n=n.add(r),t.push(n);r=n.double()}return t},ll=t=>{let e=Zi||(Zi=cl()),r=(f,d)=>{let y=d.negate();return f?y:d},n=dn,s=Bt,i=1+256/Mt,a=2**(Mt-1),o=BigInt(2**Mt-1),l=2**Mt,c=BigInt(Mt);for(let f=0;f<i;f++){let d=f*a,y=Number(t&o);t>>=c,y>a&&(y-=l,t+=1n);let k=d,w=d+Math.abs(y)-1,_=f%2!==0,C=y<0;y===0?s=s.add(r(_,e[k])):n=n.add(r(C,e[w]))}return{p:n,f:s}};function xs(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`Wrong positive integer: ${t}`)}function fl(t){if(typeof t!="boolean")throw new Error(`Expected boolean, not ${t}`)}function ia(t,...e){if(!(t instanceof Uint8Array))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(t.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${t.length}`)}function dl(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");xs(t.outputLen),xs(t.blockLen)}function hl(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function pl(t,e){ia(t);let r=e.outputLen;if(t.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}var ml={number:xs,bool:fl,bytes:ia,hash:dl,exists:hl,output:pl},Ie=ml;var wr=yt(require("node:crypto"),1),yl=wr&&typeof wr=="object"&&"webcrypto"in wr?wr.webcrypto:void 0;var gl=t=>t instanceof Uint8Array;var kr=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),Le=(t,e)=>t<<32-e|t>>>e,xl=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!xl)throw new Error("Non little-endian hardware is not supported");var rd=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function bl(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function Pt(t){if(typeof t=="string"&&(t=bl(t)),!gl(t))throw new Error(`expected Uint8Array, got ${typeof t}`);return t}var rr=class{clone(){return this._cloneInto()}};function at(t){let e=n=>t().update(Pt(n)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}var bn=class extends rr{constructor(e,r){super(),this.finished=!1,this.destroyed=!1,Ie.hash(e);let n=Pt(r);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let s=this.blockLen,i=new Uint8Array(s);i.set(n.length>s?e.create().update(n).digest():n);for(let a=0;a<i.length;a++)i[a]^=54;this.iHash.update(i),this.oHash=e.create();for(let a=0;a<i.length;a++)i[a]^=106;this.oHash.update(i),i.fill(0)}update(e){return Ie.exists(this),this.iHash.update(e),this}digestInto(e){Ie.exists(this),Ie.bytes(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){let e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));let{oHash:r,iHash:n,finished:s,destroyed:i,blockLen:a,outputLen:o}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=a,e.outputLen=o,e.oHash=r._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}},Sr=(t,e,r)=>new bn(t,e).update(r).digest();Sr.create=(t,e)=>new bn(t,e);var ud=new Uint8Array([0]),fd=new Uint8Array;function _l(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);let s=BigInt(32),i=BigInt(4294967295),a=Number(r>>s&i),o=Number(r&i),l=n?4:0,c=n?0:4;t.setUint32(e+l,a,n),t.setUint32(e+c,o,n)}var nr=class extends rr{constructor(e,r,n,s){super(),this.blockLen=e,this.outputLen=r,this.padOffset=n,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=kr(this.buffer)}update(e){Ie.exists(this);let{view:r,buffer:n,blockLen:s}=this;e=Pt(e);let i=e.length;for(let a=0;a<i;){let o=Math.min(s-this.pos,i-a);if(o===s){let l=kr(e);for(;s<=i-a;a+=s)this.process(l,a);continue}n.set(e.subarray(a,a+o),this.pos),this.pos+=o,a+=o,this.pos===s&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Ie.exists(this),Ie.output(e,this),this.finished=!0;let{buffer:r,view:n,blockLen:s,isLE:i}=this,{pos:a}=this;r[a++]=128,this.buffer.subarray(a).fill(0),this.padOffset>s-a&&(this.process(n,0),a=0);for(let d=a;d<s;d++)r[d]=0;_l(n,s-8,BigInt(this.length*8),i),this.process(n,0);let o=kr(e),l=this.outputLen;if(l%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let c=l/4,f=this.get();if(c>f.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<c;d++)o.setUint32(4*d,f[d],i)}digest(){let{buffer:e,outputLen:r}=this;this.digestInto(e);let n=e.slice(0,r);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());let{blockLen:r,buffer:n,length:s,finished:i,destroyed:a,pos:o}=this;return e.length=s,e.pos=o,e.finished=i,e.destroyed=a,s%r&&e.buffer.set(n),e}};var vl=(t,e,r)=>t&e^~t&r,wl=(t,e,r)=>t&e^t&r^e&r,kl=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),ot=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),ct=new Uint32Array(64),_n=class extends nr{constructor(){super(64,32,8,!1),this.A=ot[0]|0,this.B=ot[1]|0,this.C=ot[2]|0,this.D=ot[3]|0,this.E=ot[4]|0,this.F=ot[5]|0,this.G=ot[6]|0,this.H=ot[7]|0}get(){let{A:e,B:r,C:n,D:s,E:i,F:a,G:o,H:l}=this;return[e,r,n,s,i,a,o,l]}set(e,r,n,s,i,a,o,l){this.A=e|0,this.B=r|0,this.C=n|0,this.D=s|0,this.E=i|0,this.F=a|0,this.G=o|0,this.H=l|0}process(e,r){for(let d=0;d<16;d++,r+=4)ct[d]=e.getUint32(r,!1);for(let d=16;d<64;d++){let y=ct[d-15],k=ct[d-2],w=Le(y,7)^Le(y,18)^y>>>3,_=Le(k,17)^Le(k,19)^k>>>10;ct[d]=_+ct[d-7]+w+ct[d-16]|0}let{A:n,B:s,C:i,D:a,E:o,F:l,G:c,H:f}=this;for(let d=0;d<64;d++){let y=Le(o,6)^Le(o,11)^Le(o,25),k=f+y+vl(o,l,c)+kl[d]+ct[d]|0,_=(Le(n,2)^Le(n,13)^Le(n,22))+wl(n,s,i)|0;f=c,c=l,l=o,o=a+k|0,a=i,i=s,s=n,n=k+_|0}n=n+this.A|0,s=s+this.B|0,i=i+this.C|0,a=a+this.D|0,o=o+this.E|0,l=l+this.F|0,c=c+this.G|0,f=f+this.H|0,this.set(n,s,i,a,o,l,c,f)}roundClean(){ct.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}},bs=class extends _n{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}},Er=at(()=>new _n),xd=at(()=>new bs);var vn=BigInt(4294967295),_s=BigInt(32);function aa(t,e=!1){return e?{h:Number(t&vn),l:Number(t>>_s&vn)}:{h:Number(t>>_s&vn)|0,l:Number(t&vn)|0}}function Sl(t,e=!1){let r=new Uint32Array(t.length),n=new Uint32Array(t.length);for(let s=0;s<t.length;s++){let{h:i,l:a}=aa(t[s],e);[r[s],n[s]]=[i,a]}return[r,n]}var El=(t,e)=>BigInt(t>>>0)<<_s|BigInt(e>>>0),Al=(t,e,r)=>t>>>r,Tl=(t,e,r)=>t<<32-r|e>>>r,Ol=(t,e,r)=>t>>>r|e<<32-r,Cl=(t,e,r)=>t<<32-r|e>>>r,Ul=(t,e,r)=>t<<64-r|e>>>r-32,Il=(t,e,r)=>t>>>r-32|e<<64-r,Ll=(t,e)=>e,Rl=(t,e)=>t,Ml=(t,e,r)=>t<<r|e>>>32-r,Bl=(t,e,r)=>e<<r|t>>>32-r,Nl=(t,e,r)=>e<<r-32|t>>>64-r,Pl=(t,e,r)=>t<<r-32|e>>>64-r;function jl(t,e,r,n){let s=(e>>>0)+(n>>>0);return{h:t+r+(s/2**32|0)|0,l:s|0}}var Dl=(t,e,r)=>(t>>>0)+(e>>>0)+(r>>>0),Vl=(t,e,r,n)=>e+r+n+(t/2**32|0)|0,Fl=(t,e,r,n)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0),zl=(t,e,r,n,s)=>e+r+n+s+(t/2**32|0)|0,ql=(t,e,r,n,s)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0)+(s>>>0),Wl=(t,e,r,n,s,i)=>e+r+n+s+i+(t/2**32|0)|0,Hl={fromBig:aa,split:Sl,toBig:El,shrSH:Al,shrSL:Tl,rotrSH:Ol,rotrSL:Cl,rotrBH:Ul,rotrBL:Il,rotr32H:Ll,rotr32L:Rl,rotlSH:Ml,rotlSL:Bl,rotlBH:Nl,rotlBL:Pl,add:jl,add3L:Dl,add3H:Vl,add4L:Fl,add4H:zl,add5H:Wl,add5L:ql},V=Hl;var[$l,Zl]=V.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),lt=new Uint32Array(80),ut=new Uint32Array(80),sr=class extends nr{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){let{Ah:e,Al:r,Bh:n,Bl:s,Ch:i,Cl:a,Dh:o,Dl:l,Eh:c,El:f,Fh:d,Fl:y,Gh:k,Gl:w,Hh:_,Hl:C}=this;return[e,r,n,s,i,a,o,l,c,f,d,y,k,w,_,C]}set(e,r,n,s,i,a,o,l,c,f,d,y,k,w,_,C){this.Ah=e|0,this.Al=r|0,this.Bh=n|0,this.Bl=s|0,this.Ch=i|0,this.Cl=a|0,this.Dh=o|0,this.Dl=l|0,this.Eh=c|0,this.El=f|0,this.Fh=d|0,this.Fl=y|0,this.Gh=k|0,this.Gl=w|0,this.Hh=_|0,this.Hl=C|0}process(e,r){for(let L=0;L<16;L++,r+=4)lt[L]=e.getUint32(r),ut[L]=e.getUint32(r+=4);for(let L=16;L<80;L++){let U=lt[L-15]|0,ce=ut[L-15]|0,pe=V.rotrSH(U,ce,1)^V.rotrSH(U,ce,8)^V.shrSH(U,ce,7),fe=V.rotrSL(U,ce,1)^V.rotrSL(U,ce,8)^V.shrSL(U,ce,7),ie=lt[L-2]|0,te=ut[L-2]|0,Ye=V.rotrSH(ie,te,19)^V.rotrBH(ie,te,61)^V.shrSH(ie,te,6),Ve=V.rotrSL(ie,te,19)^V.rotrBL(ie,te,61)^V.shrSL(ie,te,6),mt=V.add4L(fe,Ve,ut[L-7],ut[L-16]),Ft=V.add4H(mt,pe,Ye,lt[L-7],lt[L-16]);lt[L]=Ft|0,ut[L]=mt|0}let{Ah:n,Al:s,Bh:i,Bl:a,Ch:o,Cl:l,Dh:c,Dl:f,Eh:d,El:y,Fh:k,Fl:w,Gh:_,Gl:C,Hh:H,Hl:B}=this;for(let L=0;L<80;L++){let U=V.rotrSH(d,y,14)^V.rotrSH(d,y,18)^V.rotrBH(d,y,41),ce=V.rotrSL(d,y,14)^V.rotrSL(d,y,18)^V.rotrBL(d,y,41),pe=d&k^~d&_,fe=y&w^~y&C,ie=V.add5L(B,ce,fe,Zl[L],ut[L]),te=V.add5H(ie,H,U,pe,$l[L],lt[L]),Ye=ie|0,Ve=V.rotrSH(n,s,28)^V.rotrBH(n,s,34)^V.rotrBH(n,s,39),mt=V.rotrSL(n,s,28)^V.rotrBL(n,s,34)^V.rotrBL(n,s,39),Ft=n&i^n&o^i&o,p=s&a^s&l^a&l;H=_|0,B=C|0,_=k|0,C=w|0,k=d|0,w=y|0,{h:d,l:y}=V.add(c|0,f|0,te|0,Ye|0),c=o|0,f=l|0,o=i|0,l=a|0,i=n|0,a=s|0;let E=V.add3L(Ye,mt,p);n=V.add3H(E,te,Ve,Ft),s=E|0}({h:n,l:s}=V.add(this.Ah|0,this.Al|0,n|0,s|0)),{h:i,l:a}=V.add(this.Bh|0,this.Bl|0,i|0,a|0),{h:o,l}=V.add(this.Ch|0,this.Cl|0,o|0,l|0),{h:c,l:f}=V.add(this.Dh|0,this.Dl|0,c|0,f|0),{h:d,l:y}=V.add(this.Eh|0,this.El|0,d|0,y|0),{h:k,l:w}=V.add(this.Fh|0,this.Fl|0,k|0,w|0),{h:_,l:C}=V.add(this.Gh|0,this.Gl|0,_|0,C|0),{h:H,l:B}=V.add(this.Hh|0,this.Hl|0,H|0,B|0),this.set(n,s,i,a,o,l,c,f,d,y,k,w,_,C,H,B)}roundClean(){lt.fill(0),ut.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}},vs=class extends sr{constructor(){super(),this.Ah=-1942145080,this.Al=424955298,this.Bh=1944164710,this.Bl=-1982016298,this.Ch=502970286,this.Cl=855612546,this.Dh=1738396948,this.Dl=1479516111,this.Eh=258812777,this.El=2077511080,this.Fh=2011393907,this.Fl=79989058,this.Gh=1067287976,this.Gl=1780299464,this.Hh=286451373,this.Hl=-1848208735,this.outputLen=28}},ws=class extends sr{constructor(){super(),this.Ah=573645204,this.Al=-64227540,this.Bh=-1621794909,this.Bl=-934517566,this.Ch=596883563,this.Cl=1867755857,this.Dh=-1774684391,this.Dl=1497426621,this.Eh=-1775747358,this.El=-1467023389,this.Fh=-1101128155,this.Fl=1401305490,this.Gh=721525244,this.Gl=746961066,this.Hh=246885852,this.Hl=-2117784414,this.outputLen=32}},ks=class extends sr{constructor(){super(),this.Ah=-876896931,this.Al=-1056596264,this.Bh=1654270250,this.Bl=914150663,this.Ch=-1856437926,this.Cl=812702999,this.Dh=355462360,this.Dl=-150054599,this.Eh=1731405415,this.El=-4191439,this.Fh=-1900787065,this.Fl=1750603025,this.Gh=-619958771,this.Gl=1694076839,this.Hh=1203062813,this.Hl=-1090891868,this.outputLen=48}},Gl=at(()=>new sr),Sd=at(()=>new vs),Ed=at(()=>new ws),Ad=at(()=>new ks);var Fd=new TextEncoder;function wn(t,e,r){return sa(e,Er(t),r)}function Kl(t){let e=new Uint8Array(t.reduce((n,s)=>n+s.byteLength,0)),r=0;return t.forEach(n=>{e.set(n,r),r+=n.byteLength}),e}gs.hmacSha256Sync=(t,...e)=>Sr(Er,t,Kl(e));var kn=class extends fn{constructor(r,{authenticatorTimeout:n=1e4}={}){super();this.network=r;this.network.on("connection",async({publicKey:s,clientId:i,connection:a})=>{let o=await this.sendChallenge(a),l=setTimeout(()=>{a.close("Handshake timeout, did not receive response in time")},n);a.once("data").then(async c=>{clearTimeout(l),await this.verifyResponse(o,c,s)?(await this.sendValidations(a),this.emit("authenticated",{publicKey:s,clientId:i,connection:a})):a.close("Signature verification failed, signature does not match public key")})})}async sendChallenge(r){let n=crypto.getRandomValues(new Uint8Array(32));return await this.sendData(r,{type:"challenge",challenge:n}),n}async verifyResponse(r,n,s){let i=await this.decodeData(n);return i.type!=="challenge-response"?!1:wn(r,i.signature,s)}async sendValidations(r){return this.sendData(r,{type:"validation",message:"Authentication successful"})}};function Re(t){if(t.length>=255)throw new TypeError("Alphabet too long");let e=new Uint8Array(256);for(let c=0;c<e.length;c++)e[c]=255;for(let c=0;c<t.length;c++){let f=t.charAt(c),d=f.charCodeAt(0);if(e[d]!==255)throw new TypeError(f+" is ambiguous");e[d]=c}let r=t.length,n=t.charAt(0),s=Math.log(r)/Math.log(256),i=Math.log(256)/Math.log(r);function a(c){if(ArrayBuffer.isView(c)?c=new Uint8Array(c.buffer,c.byteOffset,c.byteLength):Array.isArray(c)&&(c=Uint8Array.from(c)),!(c instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(c.length===0)return"";let f=0,d=0,y=0,k=c.length;for(;y!==k&&c[y]===0;)y++,f++;let w=(k-y)*i+1>>>0,_=new Uint8Array(w);for(;y!==k;){let B=c[y],L=0;for(let U=w-1;(B!==0||L<d)&&U!==-1;U--,L++)B+=256*_[U]>>>0,_[U]=B%r>>>0,B=B/r>>>0;if(B!==0)throw new Error("Non-zero carry");d=L,y++}let C=w-d;for(;C!==w&&_[C]===0;)C++;let H=n.repeat(f);for(;C<w;++C)H+=t.charAt(_[C]);return H}function o(c){if(typeof c!="string")throw new TypeError("Expected String");if(c.length===0)return new Uint8Array;let f=0,d=0,y=0;for(;c[f]===n;)d++,f++;let k=(c.length-f)*s+1>>>0,w=new Uint8Array(k);for(;c[f];){let B=e[c.charCodeAt(f)];if(B===255)return;let L=0;for(let U=k-1;(B!==0||L<y)&&U!==-1;U--,L++)B+=r*w[U]>>>0,w[U]=B%256>>>0,B=B/256>>>0;if(B!==0)throw new Error("Non-zero carry");y=L,f++}let _=k-y,C=new Uint8Array(d+(k-_)),H=d;for(;_!==k;)C[H++]=w[_++];return C}function l(c){let f=o(c);if(f)return f;throw new Error(`Non-base${r} character`)}return{encode:a,decodeUnsafe:o,decode:l}}var ch=Re("01"),lh=Re("01234567"),uh=Re("0123456789a"),fh=Re("0123456789abcdef"),dh=Re("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),hh=Re("ybndrfg8ejkmcpqxot1uwisza345h769"),ph=Re("0123456789abcdefghijklmnopqrstuvwxyz"),ft=Re("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),mh=Re("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz"),yh=Re("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),gh=Re("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_.!~");var oa=64;var Ss=class extends Error{constructor(e,r){super(e,r),this.name="DecodeError"}};function Yl(t){return[t.subarray(0,oa),t.subarray(oa)]}function ca(t){let[e,r]=Yl(t),n;try{n=yr(r)}catch{throw new Ss("Failed to decode the message")}return{verified:wn(r,e,n.from.publicKey),message:n}}var Sn=class{constructor(e,r){this.registry=e;this.network=r}routeIncomingData(e,r){let{verified:n,message:s}=ca(e);if(!n){console.warn("Received invalid message",s);return}let{publicKey:i,clientId:a}=s.to??{};if(!i)return this.broadcastMessage(e,r);if(!a)return this.broadcastMessageToPublicKey(i,e,r);this.sendDirectMessage(i,a,e)}sendDirectMessage(e,r,n){let s=this.registry.getConnection(e,r);if(!s)return this.warnUnknown("client",r);this.network.send(s,n)}broadcastMessageToPublicKey(e,r,n){let s=this.registry.getConnections(e);if(!s)return this.warnUnknown("public key",e);s.forEach(i=>{i!==n&&this.network.send(i,r)})}broadcastMessage(e,r){this.registry.forEach(n=>{n!==r&&this.network.send(n,e)})}warnUnknown(e,r){console.warn(`Received message for unknown ${e}`,ft.encode(r))}};var En=class{registry=new Map;registerConnection(e,r,n){if(!n.isConnected()){console.warn("Connection is not connected");return}let s=this.encodeBuffer(e),i=this.encodeBuffer(r),a=this.registry.get(s);a?a.set(i,n):this.registry.set(s,new Map([[i,n]])),n.on("close",()=>{this.removeConnection(e,r)})}getConnections(e){return this.registry.get(this.encodeBuffer(e))}getConnection(e,r){return this.registry.get(this.encodeBuffer(e))?.get(this.encodeBuffer(r))}removeConnection(e,r){let n=this.encodeBuffer(e),s=this.encodeBuffer(r),i=this.registry.get(n);if(i){let a=i.get(s);a&&(a.close("Client disconnected"),i.delete(s),i.size===0&&this.registry.delete(n))}}forEach(e){this.registry.forEach(r=>{r.forEach(e)})}encodeBuffer(e){return new TextDecoder().decode(e)}};var An=class{registry=new En;network;constructor({network:e}){this.network=e;let r=new kn(e),n=new Sn(this.registry,e);r.on("authenticated",({publicKey:s,clientId:i,connection:a})=>{this.registry.registerConnection(s,i,a),a.on("data",o=>n.routeIncomingData(o,a))})}async listen(){return this.network.listen()}async close(){return this.network.close()}};var ho=require("http");var cf=yt(Es(),1),lf=yt(Rn(),1),uf=yt(Mn(),1),ff=yt(Dn(),1),Ws=yt(qs(),1);var Fn=class extends _e{};var Hs=yt(fo(),1);var zn=class extends _e{};var qn=class t extends zn{constructor(r){super();this.socket=r;this.socket.binaryType="arraybuffer",this.socket.onmessage=n=>{this.emit("data",new Uint8Array(n.data))},this.socket.onclose=n=>{this.emit("close",new Error(n.reason))},this.socket.onerror=n=>{this.emit("close",n.error)}}close(r){this.socket.close(1e3,r),this.clearListeners()}send(r){this.socket.send(r)}isConnected(){return this.socket.readyState===Hs.default.OPEN}static create(r,n,s){let i=new URL(r);return i.searchParams.set("publicKey",ft.encode(n)),i.searchParams.set("clientId",ft.encode(s)),new t(new Hs.default(i))}static fromSocket(r){return new t(r)}};var Wn=class extends Fn{constructor(r){super();this.config=r;this.server=new ho.Server,this.wss=new Ws.default({server:this.server}),this.wss.on("connection",(n,s)=>{let i=new URL(s.url,"ddnet://"),a=ft.decode(i.searchParams.get("publicKey")),o=ft.decode(i.searchParams.get("clientId")),l=qn.fromSocket(n);this.emit("connection",{publicKey:a,clientId:o,connection:l})})}server;wss;async listen(){return new Promise(r=>{this.server.listen(this.config.port,this.config.host,()=>{r()})})}async close(){return new Promise((r,n)=>{this.wss.close(s=>{s?n(s):this.server.close(i=>{i?n(i):r()})})})}send(r,n){r.send(n)}};var df=new An({network:new Wn({host:"0.0.0.0",port:8080})});df.listen().then(()=>{console.log("Signaling server listening on port 8080")});
/*! Bundled license information:

@noble/secp256k1/index.js:
  (*! noble-secp256k1 - MIT License (c) 2019 Paul Miller (paulmillr.com) *)

@noble/hashes/esm/utils.js:
  (*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) *)
*/
